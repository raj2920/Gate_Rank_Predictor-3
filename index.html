<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="iLnn73OYPE8oGpGt16HX4ooi_DyK4Q52wTCGQ96SDfc" />
    <meta name="description" content="Accurate GATE 2026 Rank Predictor based on actual GATE data. Check expected rank, score vs marks, and cutoff analysis for all branches.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5B7D2R8VD0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5B7D2R8VD0');
</script>
    <title>GATE Rank Predictor 2026 | Predict Your Rank, Score & IIT/PSU Chances Instantly</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* 3D Enhanced UI with Crisp Text */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 30px;
        }

        .container {
            width: 90%;
            max-width: 1300px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Header with 3D effect */
        header {
            background: linear-gradient(135deg, var(--primary), #1a2634);
            color: white;
            padding: 30px 50px;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border-bottom: 3px solid rgba(255,255,255,0.1);
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo i {
            font-size: 3rem;
            color: var(--secondary);
            background: white;
            padding: 15px;
            border-radius: 50%;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .logo h1 {
            font-size: 2.2rem;
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .logo span {
            color: var(--secondary);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            color: #ecf0f1;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            -webkit-font-smoothing: antialiased;
            margin-top: 5px;
        }

        /* Main Content */
        .main-content {
            padding: 50px;
        }

        /* Input Section */
        .input-section {
            background: #f8f9fa;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 40px;
            border: 2px solid #e0e0e0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .input-section:hover {
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
        }

        .section-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            margin-bottom: 25px;
        }

        .section-toggle h2 {
            color: var(--primary);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            -webkit-font-smoothing: antialiased;
        }

        .marks-type {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .marks-type:hover {
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .marks-type h4 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
            -webkit-font-smoothing: antialiased;
        }

        .marks-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        @media (max-width: 768px) {
            .marks-grid {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group label {
            font-weight: 600;
            color: #555;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            -webkit-font-smoothing: antialiased;
        }

        .input-group input, .input-group select {
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
            -webkit-font-smoothing: antialiased;
        }

        .input-group input:focus, .input-group select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2), inset 0 2px 5px rgba(0,0,0,0.05);
        }

        .category-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .category-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .category-btn {
            padding: 15px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            -webkit-font-smoothing: antialiased;
        }

        .category-btn:hover {
            background: #e0e0e0;
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .category-btn.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
        }

        .quick-buttons {
            display: flex;
            gap: 12px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 10px 20px;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            -webkit-font-smoothing: antialiased;
        }

        .quick-btn:hover {
            background: #e0e0e0;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .quick-btn.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }

        .predict-container {
            text-align: center;
            margin: 40px 0;
        }

        .predict-btn {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            color: white;
            border: none;
            padding: 22px 50px;
            border-radius: 60px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 20px 40px rgba(52, 152, 219, 0.4);
            border: 1px solid rgba(255,255,255,0.3);
            -webkit-font-smoothing: antialiased;
        }

        .predict-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 30px 60px rgba(52, 152, 219, 0.5);
        }

        .predict-btn:active {
            transform: scale(0.98);
        }

        .check-again-btn {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 60px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 15px 30px rgba(243, 156, 18, 0.4);
            border: 1px solid rgba(255,255,255,0.3);
            -webkit-font-smoothing: antialiased;
        }

        .check-again-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(243, 156, 18, 0.5);
        }

        .results-section {
            background: white;
            border-radius: 25px;
            padding: 40px;
            margin-top: 30px;
            display: none;
            border: 2px solid var(--secondary);
            animation: slideIn 0.6s ease;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
        }

        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: translateY(-20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-section.visible {
            display: block;
        }

        .results-header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 3px solid #f0f0f0;
        }

        .results-header h2 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            -webkit-font-smoothing: antialiased;
        }

        .qualification-status {
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            border-radius: 20px;
            transition: all 0.3s;
        }

        .qualification-status:hover {
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .qualified {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(39, 174, 96, 0.05));
            border: 3px solid var(--success);
            box-shadow: 0 15px 30px rgba(39, 174, 96, 0.2);
        }

        .not-qualified {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(231, 76, 60, 0.05));
            border: 3px solid var(--danger);
            box-shadow: 0 15px 30px rgba(231, 76, 60, 0.2);
        }

        .status-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .status-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 15px;
            -webkit-font-smoothing: antialiased;
        }

        .status-details {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
        }

        .iit-admission {
            background: linear-gradient(135deg, #e8f6f3, #d1f2eb);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border-left: 8px solid #1abc9c;
            box-shadow: 0 15px 30px rgba(26, 188, 156, 0.2);
            transition: all 0.3s;
        }

        .iit-admission:hover {
            box-shadow: 0 25px 50px rgba(26, 188, 156, 0.3);
        }

        .iit-admission h4 {
            color: #0e6251;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            -webkit-font-smoothing: antialiased;
        }

        .iit-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .iit-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .iit-grid {
                grid-template-columns: 1fr;
            }
        }

        .iit-card {
            background: white;
            padding: 25px;
            border-radius: 18px;
            text-align: center;
            border-top: 6px solid #1abc9c;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .iit-card:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .iit-card h5 {
            color: #0e6251;
            margin-bottom: 10px;
            font-size: 1.1rem;
            -webkit-font-smoothing: antialiased;
        }

        .iit-marks {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1abc9c;
            margin: 10px 0;
            -webkit-font-smoothing: antialiased;
        }

        .iit-type {
            font-size: 0.9rem;
            color: #666;
            -webkit-font-smoothing: antialiased;
        }

        .analysis-box {
            background: linear-gradient(135deg, #fff8e1, #ffeaa7);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border-left: 8px solid var(--warning);
            box-shadow: 0 15px 30px rgba(243, 156, 18, 0.2);
            transition: all 0.3s;
        }

        .analysis-box:hover {
            box-shadow: 0 25px 50px rgba(243, 156, 18, 0.3);
        }

        .analysis-box h4 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            -webkit-font-smoothing: antialiased;
        }

        .analysis-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #2c3e50;
            -webkit-font-smoothing: antialiased;
        }

        .excellent {
            color: var(--success);
            font-weight: 700;
        }

        .good {
            color: #3498db;
            font-weight: 700;
        }

        .average {
            color: var(--warning);
            font-weight: 700;
        }

        .improve {
            color: var(--danger);
            font-weight: 700;
        }

        .psu-section {
            background: linear-gradient(135deg, #fff0e1, #ffe3b3);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border-left: 8px solid #e67e22;
            box-shadow: 0 15px 30px rgba(230, 126, 34, 0.2);
            transition: all 0.3s;
        }

        .psu-section:hover {
            box-shadow: 0 25px 50px rgba(230, 126, 34, 0.3);
        }

        .psu-section h4 {
            color: #7d6608;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            -webkit-font-smoothing: antialiased;
        }

        .psu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .psu-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .psu-grid {
                grid-template-columns: 1fr;
            }
        }

        .psu-card {
            background: white;
            padding: 25px;
            border-radius: 18px;
            text-align: center;
            border-top: 6px solid #e67e22;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .psu-card:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .psu-card h5 {
            color: #7d6608;
            margin-bottom: 10px;
            font-size: 1.1rem;
            -webkit-font-smoothing: antialiased;
        }

        .psu-chance {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e67e22;
            margin: 10px 0;
            -webkit-font-smoothing: antialiased;
        }

        .psu-companies {
            font-size: 0.9rem;
            color: #666;
            -webkit-font-smoothing: antialiased;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 35px;
        }

        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            border-top: 6px solid var(--secondary);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .result-card:hover {
            transform: scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .result-card h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            -webkit-font-smoothing: antialiased;
        }

        .card-value {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--secondary);
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            -webkit-font-smoothing: antialiased;
        }

        .card-label {
            color: #666;
            font-size: 0.95rem;
            -webkit-font-smoothing: antialiased;
        }

        .cutoff-section {
            background: linear-gradient(135deg, #e8f4fc, #d6eaf8);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border-left: 8px solid var(--secondary);
            box-shadow: 0 15px 30px rgba(52, 152, 219, 0.2);
            transition: all 0.3s;
        }

        .cutoff-section:hover {
            box-shadow: 0 25px 50px rgba(52, 152, 219, 0.3);
        }

        .cutoff-section h4 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            -webkit-font-smoothing: antialiased;
        }

        .cutoff-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .cutoff-table th {
            background: var(--primary);
            color: white;
            padding: 18px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            -webkit-font-smoothing: antialiased;
        }

        .cutoff-table td {
            padding: 18px;
            text-align: center;
            border-bottom: 1px solid #eee;
            -webkit-font-smoothing: antialiased;
        }

        .cutoff-table tr:hover {
            background: #f9f9f9;
        }

        .cutoff-value {
            font-weight: 700;
            color: var(--primary);
        }

        .your-cutoff {
            background: rgba(52, 152, 219, 0.1);
            font-weight: 700;
        }

        .cutoff-diff {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 5px;
            -webkit-font-smoothing: antialiased;
        }

        .graph-section {
            margin-top: 50px;
            background: white;
            padding: 35px;
            border-radius: 25px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            transition: all 0.3s;
        }

        .graph-section:hover {
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }

        .graph-header h3 {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 10px;
            -webkit-font-smoothing: antialiased;
        }

        .graph-header p {
            color: #666;
            -webkit-font-smoothing: antialiased;
        }

        .graph-container {
            height: 450px;
            position: relative;
        }

        .graph-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .graph-control-btn {
            padding: 12px 24px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            -webkit-font-smoothing: antialiased;
        }

        .graph-control-btn:hover {
            background: #e0e0e0;
            transform: scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        .graph-control-btn.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }

        .share-buttons {
            display: flex;
            gap: 20px;
            margin: 35px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .share-btn {
            padding: 15px 30px;
            border-radius: 40px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.3);
            -webkit-font-smoothing: antialiased;
        }

        .share-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 30px rgba(0,0,0,0.2);
        }

        .save-btn {
            background: linear-gradient(135deg, #27ae60, #219653);
            color: white;
        }

        .share-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }

        .share-download {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        footer {
            background: linear-gradient(135deg, var(--primary), #1a2634);
            color: white;
            padding: 40px 50px;
            margin-top: 50px;
            text-align: center;
            border-top: 3px solid rgba(255,255,255,0.1);
        }

        .footer-content h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            -webkit-font-smoothing: antialiased;
        }

        .footer-content p {
            opacity: 0.9;
            -webkit-font-smoothing: antialiased;
        }

        .copyright {
            opacity: 0.95;
            font-size: 1.1rem;
            margin-top: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            -webkit-font-smoothing: antialiased;
        }

        .developer-badge {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            padding: 12px 25px;
            border-radius: 40px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.4);
            transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .developer-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 35px rgba(52, 152, 219, 0.5);
        }

        .developer-icon {
            color: white;
            font-size: 1.2rem;
        }

        .developer-name {
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            -webkit-font-smoothing: antialiased;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading i {
            font-size: 4rem;
            color: var(--secondary);
            margin-bottom: 25px;
            animation: spin 1.5s linear infinite;
            filter: drop-shadow(0 10px 15px rgba(52, 152, 219, 0.3));
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: var(--primary);
            font-size: 1.1rem;
            font-weight: 600;
            -webkit-font-smoothing: antialiased;
        }

        .marks-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 20px;
            margin: 30px 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        @media (max-width: 600px) {
            .marks-summary {
                grid-template-columns: 1fr;
            }
        }

        .summary-item {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 15px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .summary-item:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 8px 0;
            -webkit-font-smoothing: antialiased;
        }

        .summary-label {
            color: #666;
            font-size: 0.9rem;
            -webkit-font-smoothing: antialiased;
        }

        .note-box {
            background: #fff8e1;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 0.95rem;
            border-left: 5px solid var(--warning);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            line-height: 1.6;
        }

        .note-box p {
            color: #555;
            -webkit-font-smoothing: antialiased;
        }

        .note-box i {
            color: var(--warning);
            margin-right: 8px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .main-content {
                padding: 25px;
            }

            .predict-btn, .check-again-btn {
                padding: 18px 35px;
                font-size: 1.2rem;
            }

            .card-value {
                font-size: 2.2rem;
            }

            header {
                padding: 25px;
            }

            .cutoff-table {
                font-size: 0.95rem;
            }

            .cutoff-table th, .cutoff-table td {
                padding: 12px;
            }

            .share-buttons {
                flex-direction: column;
                align-items: center;
            }

            .share-btn {
                width: 100%;
                max-width: 350px;
                justify-content: center;
            }
        }

        html {
            scroll-behavior: smooth;
        }

        body, button, input, select, textarea, h1, h2, h3, h4, h5, h6, p, span, div {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <div>
                    <h1>GATE RANK <span>PREDICTOR</span> 2026</h1>
                    <p class="subtitle">Predict Your Rank, Score & IIT/PSU Chances Instantly</p>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Input Section -->
            <div class="input-section">
                <div class="section-toggle">
                    <h2><i class="fas fa-edit"></i> SELECT YOUR PAPER</h2>
                </div>
                
                <div class="input-fields" id="inputFields">
                    <div class="input-group">
                        <label><i class="fas fa-file-alt"></i> Select Your Paper</label>
                        <select id="paper">
                            <option value="CS" selected>Computer Science (CS)</option>
                            <option value="CE">Civil Engineering (CE)</option>
                            <option value="ME">Mechanical Engineering (ME)</option>
                            <option value="EE">Electrical Engineering (EE)</option>
                            <option value="ECE">Electronics & Communication (ECE)</option>
                            <option value="DA">Data Science & AI (DA)</option>
                            <option value="IN">Instrumentation Engineering (IN)</option>
                            <option value="PI">Production & Industrial Engg (PI)</option>
                            <option value="XE">Engineering Sciences (XE)</option>
                            <option value="ES">Environmental Science (ES)</option>
                            <option value="CH">Chemical Engineering (CH)</option>
                        </select>
                    </div>

                    <div class="marks-type">
                        <h4><i class="fas fa-1"></i> Type 1 Questions (1 Mark Each) - Total 30 Questions</h4>
                        <div class="marks-grid">
                            <div class="input-group">
                                <label>Correct Answers</label>
                                <input type="number" id="type1Correct" min="0" max="30" step="1" value="" placeholder="Enter correct answers" oninput="updateMarks()">
                                <div class="quick-buttons">
                                    <button class="quick-btn" onclick="setValue('type1Correct', 20, event)">20</button>
                                    <button class="quick-btn" onclick="setValue('type1Correct', 25, event)">25</button>
                                    <button class="quick-btn" onclick="setValue('type1Correct', 28, event)">28</button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Wrong Answers</label>
                                <input type="number" id="type1Wrong" min="0" max="30" step="1" value="" placeholder="Enter wrong answers" oninput="updateMarks()">
                                <div class="quick-buttons">
                                    <button class="quick-btn" onclick="setValue('type1Wrong', 0, event)">0</button>
                                    <button class="quick-btn" onclick="setValue('type1Wrong', 3, event)">3</button>
                                    <button class="quick-btn" onclick="setValue('type1Wrong', 5, event)">5</button>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                            <i class="fas fa-info-circle"></i> Total 1-mark questions: <span id="type1Total">0</span>/30
                        </div>
                    </div>

                    <div class="marks-type">
                        <h4><i class="fas fa-2"></i> Type 2 Questions (2 Marks Each) - Total 35 Questions</h4>
                        <div class="marks-grid">
                            <div class="input-group">
                                <label>Correct Answers</label>
                                <input type="number" id="type2Correct" min="0" max="35" step="1" value="" placeholder="Enter correct answers" oninput="updateMarks()">
                                <div class="quick-buttons">
                                    <button class="quick-btn" onclick="setValue('type2Correct', 15, event)">15</button>
                                    <button class="quick-btn" onclick="setValue('type2Correct', 20, event)">20</button>
                                    <button class="quick-btn" onclick="setValue('type2Correct', 25, event)">25</button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Wrong Answers</label>
                                <input type="number" id="type2Wrong" min="0" max="35" step="1" value="" placeholder="Enter wrong answers" oninput="updateMarks()">
                                <div class="quick-buttons">
                                    <button class="quick-btn" onclick="setValue('type2Wrong', 0, event)">0</button>
                                    <button class="quick-btn" onclick="setValue('type2Wrong', 2, event)">2</button>
                                    <button class="quick-btn" onclick="setValue('type2Wrong', 5, event)">5</button>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                            <i class="fas fa-info-circle"></i> Total 2-mark questions: <span id="type2Total">0</span>/35
                        </div>
                    </div>

                    <!-- Category Selection -->
                    <div class="input-group">
                        <label><i class="fas fa-users"></i> Select Your Category</label>
                        <div class="category-buttons">
                            <button class="category-btn active" onclick="selectCategory('GEN', event)">General</button>
                            <button class="category-btn" onclick="selectCategory('OBC', event)">OBC-NCL</button>
                            <button class="category-btn" onclick="selectCategory('EWS', event)">EWS</button>
                            <button class="category-btn" onclick="selectCategory('SC', event)">SC</button>
                            <button class="category-btn" onclick="selectCategory('ST', event)">ST</button>
                            <button class="category-btn" onclick="selectCategory('PWD', event)">PwD</button>
                        </div>
                        <input type="hidden" id="category" value="GEN">
                    </div>

                    <div class="note-box">
                        <p><i class="fas fa-info-circle"></i> This is your estimated marks, expected score, and predicted rank based on available data and analysis. The actual GATE result may vary according to the official evaluation and calculation by the exam authorities.</p>
                    </div>
                </div>
            </div>

            <!-- Predict Button -->
            <div class="predict-container">
                <button class="predict-btn" onclick="predictRank()">
                    <i class="fas fa-bolt"></i> PREDICT MY RANK & ANALYSIS
                </button>
            </div>

            <!-- Loading Animation -->
            <div class="loading" id="loading">
                <i class="fas fa-spinner"></i>
                <p>Analyzing your marks...</p>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection">
                <div class="results-header">
                    <h2><i class="fas fa-chart-line"></i> Your GATE 2026 Prediction Results</h2>
                    <p>Based on available data and analysis</p>
                </div>

                <!-- Share Buttons -->
                <div class="share-buttons">
                    <button class="share-btn save-btn" onclick="saveResult()">
                        <i class="fas fa-save"></i> SAVE RESULT
                    </button>
                    <button class="share-btn share-whatsapp" onclick="shareWhatsApp()">
                        <i class="fab fa-whatsapp"></i> SHARE ON WHATSAPP
                    </button>
                    <button class="share-btn share-download" onclick="downloadResult()">
                        <i class="fas fa-download"></i> DOWNLOAD AS IMAGE
                    </button>
                </div>

                <!-- Qualification Status -->
                <div class="qualification-status" id="qualificationStatus">
                    <!-- Will be populated by JavaScript -->
                </div>

                <!-- Marks Summary -->
                <div class="marks-summary">
                    <div class="summary-item">
                        <div class="summary-label">Type 1 Marks</div>
                        <div class="summary-value" id="type1Marks">0.00</div>
                        <div class="summary-label" id="type1Details">0✓ 0✗</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Type 2 Marks</div>
                        <div class="summary-value" id="type2Marks">0.00</div>
                        <div class="summary-label" id="type2Details">0✓ 0✗</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Total Marks</div>
                        <div class="summary-value" id="totalMarks">0.00</div>
                        <div class="summary-label">Out of 100</div>
                    </div>
                </div>

                <!-- Results Grid -->
                <div class="results-grid">
                    <div class="result-card">
                        <h4><i class="fas fa-trophy"></i> Expected Rank</h4>
                        <div class="card-value" id="predictedRank">--</div>
                        <div class="card-label">All India Rank</div>
                    </div>

                    <div class="result-card">
                        <h4><i class="fas fa-star"></i> GATE Score</h4>
                        <div class="card-value" id="predictedScore">--</div>
                        <div class="card-label">Out of 1000</div>
                    </div>

                    <div class="result-card">
                        <h4><i class="fas fa-percentage"></i> Percentile</h4>
                        <div class="card-value" id="percentile">--</div>
                        <div class="card-label">Approximate</div>
                    </div>

                    <div class="result-card">
                        <h4><i class="fas fa-chart-bar"></i> Rank Range</h4>
                        <div class="card-value" id="rankRange">--</div>
                        <div class="card-label">±15% variation</div>
                    </div>
                </div>

                <!-- IIT Admission Section -->
                <div class="iit-admission" id="iitAdmissionSection">
                    <h4><i class="fas fa-university"></i> IIT Admission Chances (Based on Your Category)</h4>
                    <div id="iitGridContainer">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Analysis Box -->
                <div class="analysis-box">
                    <h4><i class="fas fa-lightbulb"></i> Analysis & Insights</h4>
                    <div class="analysis-text" id="analysisText">
                        Enter your marks and click predict to see detailed analysis...
                    </div>
                </div>

                <!-- PSU Chances Section -->
                <div class="psu-section" id="psuSection">
                    <h4><i class="fas fa-building"></i> PSU Recruitment Chances</h4>
                    <div id="psuGridContainer">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Cutoff Section -->
                <div class="cutoff-section">
                    <h4><i class="fas fa-flag-checkered"></i> GATE 2026 Expected Cutoff Marks (Based on 2022-2025 Trends)</h4>
                    <div id="cutoffTableContainer">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Interactive Graph Section -->
                <div class="graph-section">
                    <div class="graph-header">
                        <h3><i class="fas fa-chart-line"></i> Rank vs Marks Curve</h3>
                        <p>Hover over points to see exact values • Click and drag to zoom • Double-click to reset</p>
                    </div>
                    <div class="graph-container">
                        <canvas id="rankChart"></canvas>
                    </div>
                    <div class="graph-controls">
                        <button class="graph-control-btn active" onclick="setGraphView('all')">All Data</button>
                        <button class="graph-control-btn" onclick="setGraphView('top')">Top 10,000</button>
                        <button class="graph-control-btn" onclick="setGraphView('yourRegion')">Your Region</button>
                        <button class="graph-control-btn" onclick="exportGraph()">Export Graph</button>
                    </div>
                </div>

                <!-- Check Again Button -->
                <div style="text-align: center; margin-top: 30px;">
                    <button class="check-again-btn" onclick="checkAgain()">
                        <i class="fas fa-redo"></i> CHECK AGAIN WITH DIFFERENT MARKS
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <h3>GATE Rank Predictor 2026</h3>
                <p>Predict Your Rank, Score & IIT/PSU Chances Instantly</p>
                <div class="copyright">
                    <i class="fas fa-copyright"></i> 2026 GATE Rank Predictor
                    <div class="developer-badge">
                        <i class="fas fa-code developer-icon"></i>
                        <span class="developer-name">Developed by RAJ BITTU</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // =====================================================
        // ACTUAL CSE 2025 DATA FROM YOUR IMAGES
        // =====================================================
        
        const cse2025Data = [
            // From 1.jpeg
            { rank: 1, marks: 100.00, score: 1000 },
            { rank: 4, marks: 91.64, score: 985 },
            { rank: 8, marks: 90.75, score: 976 },
            { rank: 12, marks: 89.04, score: 959 },
            { rank: 14, marks: 88.71, score: 956 },
            { rank: 32, marks: 86.11, score: 929 },
            { rank: 38, marks: 85.43, score: 922 },
            { rank: 58, marks: 83.84, score: 906 },
            { rank: 65, marks: 83.51, score: 903 },
            { rank: 130, marks: 79.29, score: 860 },
            { rank: 215, marks: 76.69, score: 833 },
            { rank: 306, marks: 73.57, score: 820 },
            
            // From 2.jpeg
            { rank: 308, marks: 74.38, score: 810 },
            { rank: 336, marks: 73.57, score: 802 },
            { rank: 351, marks: 73.16, score: 797 },
            { rank: 365, marks: 73.11, score: 797 },
            { rank: 416, marks: 71.93, score: 785 },
            { rank: 532, marks: 70.20, score: 767 },
            { rank: 609, marks: 69.21, score: 757 },
            { rank: 622, marks: 69.07, score: 756 },
            { rank: 724, marks: 67.91, score: 744 },
            { rank: 1121, marks: 64.66, score: 711 },
            { rank: 1171, marks: 64.34, score: 708 },
            { rank: 1414, marks: 62.52, score: 689 },
            
            // From 3.jpeg
            { rank: 1445, marks: 62.39, score: 688 },
            { rank: 1605, marks: 58.47, score: 649 },
            { rank: 2434, marks: 56.87, score: 632 },
            { rank: 2498, marks: 56.54, score: 628 },
            { rank: 3466, marks: 52.70, score: 589 },
            { rank: 4135, marks: 50.65, score: 568 },
            { rank: 5620, marks: 46.79, score: 529 },
            { rank: 6600, marks: 44.52, score: 506 },
            { rank: 9288, marks: 40.02, score: 460 },
            { rank: 11184, marks: 37.69, score: 436 },
            { rank: 11318, marks: 37.56, score: 435 },
            { rank: 11517, marks: 37.37, score: 433 },
            { rank: 12652, marks: 36.07, score: 420 },
            { rank: 14720, marks: 34.12, score: 400 },
            { rank: 18757, marks: 31.01, score: 368 },
            { rank: 19661, marks: 30.54, score: 364 },
            { rank: 23003, marks: 28.56, score: 343 }
        ];

        // =====================================================
        // 2025 STUDENT COUNTS (as provided)
        // =====================================================
        
        const students2025 = {
            "CS": 170888,
            "CE": 79000,
            "EE": 67700,
            "ECE": 81500,
            "ME": 62000,
            "DA": 60000,
            "IN": 35000,
            "PI": 25000,
            "XE": 20000,
            "ES": 18000,
            "CH": 30000
        };

        // =====================================================
        // 2026 STUDENT COUNTS (±5% change as per your instruction)
        // =====================================================
        
        const students2026 = {
            "CS": 191395,  // 170888 * 1.12 (12% increase for CSE only)
            "CE": Math.round(79000 * 1.05),  // 5% increase
            "EE": Math.round(67700 * 0.95),  // 5% decrease
            "ECE": Math.round(81500 * 1.05), // 5% increase
            "ME": Math.round(62000 * 0.95),  // 5% decrease
            "DA": Math.round(60000 * 1.05),  // 5% increase
            "IN": 35000,   // No change
            "PI": 25000,   // No change
            "XE": 20000,   // No change
            "ES": 18000,   // No change
            "CH": 30000    // No change
        };

        // =====================================================
        // FUNCTION TO CONVERT RANGE DATA TO POINTS
        // =====================================================
        
        function convertRangeToPoints(ranges, branch, adjustFactor = 1.0) {
            const points = [];
            
            // Add first point (rank 1) - extrapolate slightly higher than first range
            if (ranges.length > 0) {
                points.push({
                    rank: 1,
                    marks: ranges[0].avg_marks * 1.05,
                    score: ranges[0].avg_score * 1.05
                });
            }
            
            // Add mid points for each range
            ranges.forEach(range => {
                const midRank = Math.floor((range.rank_start + range.rank_end) / 2);
                points.push({
                    rank: Math.round(midRank * adjustFactor),
                    marks: range.avg_marks,
                    score: range.avg_score
                });
            });
            
            // Add last point (last rank)
            const lastRange = ranges[ranges.length - 1];
            points.push({
                rank: Math.round(lastRange.rank_end * adjustFactor),
                marks: lastRange.avg_marks * 0.98,
                score: lastRange.avg_score * 0.98
            });
            
            return points.sort((a, b) => a.rank - b.rank);
        }

        // =====================================================
        // ACTUAL CSV DATA FOR EACH BRANCH
        // =====================================================
        
        // CE Data from CSV
        const ceRanges = [
            { rank_start: 1, rank_end: 199, avg_marks: 62.44, avg_score: 671 },
            { rank_start: 200, rank_end: 399, avg_marks: 56.16, avg_score: 617 },
            { rank_start: 400, rank_end: 599, avg_marks: 53.23, avg_score: 592 },
            { rank_start: 600, rank_end: 799, avg_marks: 51.29, avg_score: 575 },
            { rank_start: 800, rank_end: 999, avg_marks: 49.85, avg_score: 563 },
            { rank_start: 1000, rank_end: 1199, avg_marks: 48.69, avg_score: 553 },
            { rank_start: 1200, rank_end: 1399, avg_marks: 47.73, avg_score: 545 },
            { rank_start: 1400, rank_end: 1599, avg_marks: 46.91, avg_score: 538 },
            { rank_start: 1600, rank_end: 1799, avg_marks: 46.19, avg_score: 532 },
            { rank_start: 1800, rank_end: 1999, avg_marks: 45.55, avg_score: 526 },
            { rank_start: 2000, rank_end: 2199, avg_marks: 44.97, avg_score: 521 },
            { rank_start: 2200, rank_end: 2399, avg_marks: 44.45, avg_score: 517 },
            { rank_start: 2400, rank_end: 2599, avg_marks: 43.97, avg_score: 513 },
            { rank_start: 2600, rank_end: 2799, avg_marks: 43.52, avg_score: 509 },
            { rank_start: 2800, rank_end: 2999, avg_marks: 43.11, avg_score: 505 },
            { rank_start: 3000, rank_end: 3199, avg_marks: 42.73, avg_score: 502 },
            { rank_start: 3200, rank_end: 3399, avg_marks: 42.37, avg_score: 499 },
            { rank_start: 3400, rank_end: 3599, avg_marks: 42.03, avg_score: 496 },
            { rank_start: 3600, rank_end: 3799, avg_marks: 41.71, avg_score: 493 },
            { rank_start: 3800, rank_end: 3999, avg_marks: 41.41, avg_score: 491 },
            { rank_start: 4000, rank_end: 4199, avg_marks: 41.12, avg_score: 488 },
            { rank_start: 4200, rank_end: 4399, avg_marks: 40.85, avg_score: 486 },
            { rank_start: 4400, rank_end: 4599, avg_marks: 40.58, avg_score: 483 },
            { rank_start: 4600, rank_end: 4799, avg_marks: 40.33, avg_score: 481 },
            { rank_start: 4800, rank_end: 4999, avg_marks: 40.09, avg_score: 479 },
            { rank_start: 5000, rank_end: 5199, avg_marks: 39.86, avg_score: 477 },
            { rank_start: 5200, rank_end: 5399, avg_marks: 39.64, avg_score: 475 },
            { rank_start: 5400, rank_end: 5599, avg_marks: 39.43, avg_score: 474 },
            { rank_start: 5600, rank_end: 5799, avg_marks: 39.22, avg_score: 472 },
            { rank_start: 5800, rank_end: 5999, avg_marks: 39.03, avg_score: 470 },
            { rank_start: 6000, rank_end: 6199, avg_marks: 38.83, avg_score: 468 },
            { rank_start: 6200, rank_end: 6399, avg_marks: 38.65, avg_score: 467 },
            { rank_start: 6400, rank_end: 6599, avg_marks: 38.47, avg_score: 465 },
            { rank_start: 6600, rank_end: 6799, avg_marks: 38.29, avg_score: 464 },
            { rank_start: 6800, rank_end: 6999, avg_marks: 38.12, avg_score: 462 },
            { rank_start: 7000, rank_end: 7199, avg_marks: 37.96, avg_score: 461 },
            { rank_start: 7200, rank_end: 7399, avg_marks: 37.8, avg_score: 460 },
            { rank_start: 7400, rank_end: 7599, avg_marks: 37.65, avg_score: 458 },
            { rank_start: 7600, rank_end: 7799, avg_marks: 37.49, avg_score: 457 },
            { rank_start: 7800, rank_end: 7999, avg_marks: 37.35, avg_score: 456 },
            { rank_start: 8000, rank_end: 8199, avg_marks: 37.2, avg_score: 454 },
            { rank_start: 8200, rank_end: 8399, avg_marks: 37.06, avg_score: 453 },
            { rank_start: 8400, rank_end: 8599, avg_marks: 36.92, avg_score: 452 },
            { rank_start: 8600, rank_end: 8799, avg_marks: 36.79, avg_score: 451 },
            { rank_start: 8800, rank_end: 8999, avg_marks: 36.66, avg_score: 450 },
            { rank_start: 9000, rank_end: 9199, avg_marks: 36.53, avg_score: 449 },
            { rank_start: 9200, rank_end: 9399, avg_marks: 36.41, avg_score: 448 },
            { rank_start: 9400, rank_end: 9599, avg_marks: 36.28, avg_score: 446 },
            { rank_start: 9600, rank_end: 9799, avg_marks: 36.16, avg_score: 445 },
            { rank_start: 9800, rank_end: 9999, avg_marks: 36.05, avg_score: 444 },
            { rank_start: 10000, rank_end: 10199, avg_marks: 35.93, avg_score: 443 },
            { rank_start: 10200, rank_end: 10399, avg_marks: 35.82, avg_score: 442 },
            { rank_start: 10400, rank_end: 10599, avg_marks: 35.71, avg_score: 442 },
            { rank_start: 10600, rank_end: 10799, avg_marks: 35.6, avg_score: 441 },
            { rank_start: 10800, rank_end: 10999, avg_marks: 35.49, avg_score: 440 },
            { rank_start: 11000, rank_end: 11199, avg_marks: 35.39, avg_score: 439 },
            { rank_start: 11200, rank_end: 11399, avg_marks: 35.29, avg_score: 438 },
            { rank_start: 11400, rank_end: 11599, avg_marks: 35.19, avg_score: 437 },
            { rank_start: 11600, rank_end: 11799, avg_marks: 35.09, avg_score: 436 },
            { rank_start: 11800, rank_end: 11999, avg_marks: 34.99, avg_score: 435 },
            { rank_start: 12000, rank_end: 12199, avg_marks: 34.89, avg_score: 435 },
            { rank_start: 12200, rank_end: 12399, avg_marks: 34.8, avg_score: 434 },
            { rank_start: 12400, rank_end: 12599, avg_marks: 34.71, avg_score: 433 },
            { rank_start: 12600, rank_end: 12799, avg_marks: 34.61, avg_score: 432 },
            { rank_start: 12800, rank_end: 12999, avg_marks: 34.52, avg_score: 431 },
            { rank_start: 13000, rank_end: 13199, avg_marks: 34.44, avg_score: 431 },
            { rank_start: 13200, rank_end: 13399, avg_marks: 34.35, avg_score: 430 },
            { rank_start: 13400, rank_end: 13599, avg_marks: 34.26, avg_score: 429 },
            { rank_start: 13600, rank_end: 13799, avg_marks: 34.18, avg_score: 428 },
            { rank_start: 13800, rank_end: 13999, avg_marks: 34.09, avg_score: 428 },
            { rank_start: 14000, rank_end: 14199, avg_marks: 34.01, avg_score: 427 },
            { rank_start: 14200, rank_end: 14399, avg_marks: 33.93, avg_score: 426 },
            { rank_start: 14400, rank_end: 14599, avg_marks: 33.85, avg_score: 426 },
            { rank_start: 14600, rank_end: 14799, avg_marks: 33.77, avg_score: 425 },
            { rank_start: 14800, rank_end: 14999, avg_marks: 33.69, avg_score: 424 },
            { rank_start: 15000, rank_end: 15199, avg_marks: 33.62, avg_score: 424 },
            { rank_start: 15200, rank_end: 15399, avg_marks: 33.54, avg_score: 423 },
            { rank_start: 15400, rank_end: 15599, avg_marks: 33.47, avg_score: 422 },
            { rank_start: 15600, rank_end: 15799, avg_marks: 33.39, avg_score: 422 },
            { rank_start: 15800, rank_end: 15999, avg_marks: 33.32, avg_score: 421 },
            { rank_start: 16000, rank_end: 16199, avg_marks: 33.25, avg_score: 420 },
            { rank_start: 16200, rank_end: 16399, avg_marks: 33.18, avg_score: 420 },
            { rank_start: 16400, rank_end: 16599, avg_marks: 33.11, avg_score: 419 },
            { rank_start: 16600, rank_end: 16799, avg_marks: 33.04, avg_score: 419 },
            { rank_start: 16800, rank_end: 16999, avg_marks: 32.97, avg_score: 418 },
            { rank_start: 17000, rank_end: 17199, avg_marks: 32.9, avg_score: 417 },
            { rank_start: 17200, rank_end: 17399, avg_marks: 32.83, avg_score: 417 },
            { rank_start: 17400, rank_end: 17599, avg_marks: 32.77, avg_score: 416 },
            { rank_start: 17600, rank_end: 17799, avg_marks: 32.7, avg_score: 416 },
            { rank_start: 17800, rank_end: 17999, avg_marks: 32.64, avg_score: 415 },
            { rank_start: 18000, rank_end: 18199, avg_marks: 32.57, avg_score: 415 },
            { rank_start: 18200, rank_end: 18399, avg_marks: 32.51, avg_score: 414 },
            { rank_start: 18400, rank_end: 18599, avg_marks: 32.45, avg_score: 414 },
            { rank_start: 18600, rank_end: 18799, avg_marks: 32.39, avg_score: 413 },
            { rank_start: 18800, rank_end: 18999, avg_marks: 32.33, avg_score: 412 },
            { rank_start: 19000, rank_end: 19199, avg_marks: 32.27, avg_score: 412 },
            { rank_start: 19200, rank_end: 19399, avg_marks: 32.21, avg_score: 411 },
            { rank_start: 19400, rank_end: 19599, avg_marks: 32.15, avg_score: 411 },
            { rank_start: 19600, rank_end: 19799, avg_marks: 32.09, avg_score: 410 },
            { rank_start: 19800, rank_end: 20000, avg_marks: 32.03, avg_score: 410 }
        ];

        // DA Data from CSV
        const daRanges = [
            { rank_start: 1, rank_end: 199, avg_marks: 65.44, avg_score: 681 },
            { rank_start: 200, rank_end: 399, avg_marks: 59.16, avg_score: 630 },
            { rank_start: 400, rank_end: 599, avg_marks: 56.23, avg_score: 606 },
            { rank_start: 600, rank_end: 799, avg_marks: 54.29, avg_score: 590 },
            { rank_start: 800, rank_end: 999, avg_marks: 52.85, avg_score: 578 },
            { rank_start: 1000, rank_end: 1199, avg_marks: 51.69, avg_score: 569 },
            { rank_start: 1200, rank_end: 1399, avg_marks: 50.73, avg_score: 561 },
            { rank_start: 1400, rank_end: 1599, avg_marks: 49.91, avg_score: 554 },
            { rank_start: 1600, rank_end: 1799, avg_marks: 49.19, avg_score: 548 },
            { rank_start: 1800, rank_end: 1999, avg_marks: 48.55, avg_score: 543 },
            { rank_start: 2000, rank_end: 2199, avg_marks: 47.97, avg_score: 538 },
            { rank_start: 2200, rank_end: 2399, avg_marks: 47.45, avg_score: 534 },
            { rank_start: 2400, rank_end: 2599, avg_marks: 46.97, avg_score: 530 },
            { rank_start: 2600, rank_end: 2799, avg_marks: 46.52, avg_score: 526 },
            { rank_start: 2800, rank_end: 2999, avg_marks: 46.11, avg_score: 523 },
            { rank_start: 3000, rank_end: 3199, avg_marks: 45.73, avg_score: 520 },
            { rank_start: 3200, rank_end: 3399, avg_marks: 45.37, avg_score: 517 },
            { rank_start: 3400, rank_end: 3599, avg_marks: 45.03, avg_score: 514 },
            { rank_start: 3600, rank_end: 3799, avg_marks: 44.71, avg_score: 511 },
            { rank_start: 3800, rank_end: 3999, avg_marks: 44.41, avg_score: 509 },
            { rank_start: 4000, rank_end: 4199, avg_marks: 44.12, avg_score: 506 },
            { rank_start: 4200, rank_end: 4399, avg_marks: 43.85, avg_score: 504 },
            { rank_start: 4400, rank_end: 4599, avg_marks: 43.58, avg_score: 502 },
            { rank_start: 4600, rank_end: 4799, avg_marks: 43.33, avg_score: 500 },
            { rank_start: 4800, rank_end: 4999, avg_marks: 43.09, avg_score: 498 },
            { rank_start: 5000, rank_end: 5199, avg_marks: 42.86, avg_score: 496 },
            { rank_start: 5200, rank_end: 5399, avg_marks: 42.64, avg_score: 494 },
            { rank_start: 5400, rank_end: 5599, avg_marks: 42.43, avg_score: 493 },
            { rank_start: 5600, rank_end: 5799, avg_marks: 42.22, avg_score: 491 },
            { rank_start: 5800, rank_end: 5999, avg_marks: 42.03, avg_score: 489 },
            { rank_start: 6000, rank_end: 6199, avg_marks: 41.83, avg_score: 488 },
            { rank_start: 6200, rank_end: 6399, avg_marks: 41.65, avg_score: 486 },
            { rank_start: 6400, rank_end: 6599, avg_marks: 41.47, avg_score: 485 },
            { rank_start: 6600, rank_end: 6799, avg_marks: 41.29, avg_score: 483 },
            { rank_start: 6800, rank_end: 6999, avg_marks: 41.12, avg_score: 482 },
            { rank_start: 7000, rank_end: 7199, avg_marks: 40.96, avg_score: 481 },
            { rank_start: 7200, rank_end: 7399, avg_marks: 40.8, avg_score: 479 },
            { rank_start: 7400, rank_end: 7599, avg_marks: 40.65, avg_score: 478 },
            { rank_start: 7600, rank_end: 7799, avg_marks: 40.49, avg_score: 477 },
            { rank_start: 7800, rank_end: 7999, avg_marks: 40.35, avg_score: 475 },
            { rank_start: 8000, rank_end: 8199, avg_marks: 40.2, avg_score: 474 },
            { rank_start: 8200, rank_end: 8399, avg_marks: 40.06, avg_score: 473 },
            { rank_start: 8400, rank_end: 8599, avg_marks: 39.92, avg_score: 472 },
            { rank_start: 8600, rank_end: 8799, avg_marks: 39.79, avg_score: 471 },
            { rank_start: 8800, rank_end: 8999, avg_marks: 39.66, avg_score: 470 },
            { rank_start: 9000, rank_end: 9199, avg_marks: 39.53, avg_score: 469 },
            { rank_start: 9200, rank_end: 9399, avg_marks: 39.41, avg_score: 468 },
            { rank_start: 9400, rank_end: 9599, avg_marks: 39.28, avg_score: 467 },
            { rank_start: 9600, rank_end: 9799, avg_marks: 39.16, avg_score: 466 },
            { rank_start: 9800, rank_end: 9999, avg_marks: 39.05, avg_score: 465 },
            { rank_start: 10000, rank_end: 10199, avg_marks: 38.93, avg_score: 464 },
            { rank_start: 10200, rank_end: 10399, avg_marks: 38.82, avg_score: 463 },
            { rank_start: 10400, rank_end: 10599, avg_marks: 38.71, avg_score: 462 },
            { rank_start: 10600, rank_end: 10799, avg_marks: 38.6, avg_score: 461 },
            { rank_start: 10800, rank_end: 10999, avg_marks: 38.49, avg_score: 460 },
            { rank_start: 11000, rank_end: 11199, avg_marks: 38.39, avg_score: 459 },
            { rank_start: 11200, rank_end: 11399, avg_marks: 38.29, avg_score: 459 },
            { rank_start: 11400, rank_end: 11599, avg_marks: 38.19, avg_score: 458 },
            { rank_start: 11600, rank_end: 11799, avg_marks: 38.09, avg_score: 457 },
            { rank_start: 11800, rank_end: 11999, avg_marks: 37.99, avg_score: 456 },
            { rank_start: 12000, rank_end: 12199, avg_marks: 37.89, avg_score: 455 },
            { rank_start: 12200, rank_end: 12399, avg_marks: 37.8, avg_score: 455 },
            { rank_start: 12400, rank_end: 12599, avg_marks: 37.71, avg_score: 454 },
            { rank_start: 12600, rank_end: 12799, avg_marks: 37.61, avg_score: 453 },
            { rank_start: 12800, rank_end: 12999, avg_marks: 37.52, avg_score: 452 },
            { rank_start: 13000, rank_end: 13199, avg_marks: 37.44, avg_score: 452 },
            { rank_start: 13200, rank_end: 13399, avg_marks: 37.35, avg_score: 451 },
            { rank_start: 13400, rank_end: 13599, avg_marks: 37.26, avg_score: 450 },
            { rank_start: 13600, rank_end: 13799, avg_marks: 37.18, avg_score: 449 },
            { rank_start: 13800, rank_end: 13999, avg_marks: 37.09, avg_score: 449 },
            { rank_start: 14000, rank_end: 14199, avg_marks: 37.01, avg_score: 448 },
            { rank_start: 14200, rank_end: 14399, avg_marks: 36.93, avg_score: 447 },
            { rank_start: 14400, rank_end: 14599, avg_marks: 36.85, avg_score: 447 },
            { rank_start: 14600, rank_end: 14799, avg_marks: 36.77, avg_score: 446 },
            { rank_start: 14800, rank_end: 14999, avg_marks: 36.69, avg_score: 445 },
            { rank_start: 15000, rank_end: 15199, avg_marks: 36.62, avg_score: 445 },
            { rank_start: 15200, rank_end: 15399, avg_marks: 36.54, avg_score: 444 },
            { rank_start: 15400, rank_end: 15599, avg_marks: 36.47, avg_score: 444 },
            { rank_start: 15600, rank_end: 15799, avg_marks: 36.39, avg_score: 443 },
            { rank_start: 15800, rank_end: 15999, avg_marks: 36.32, avg_score: 442 },
            { rank_start: 16000, rank_end: 16199, avg_marks: 36.25, avg_score: 442 },
            { rank_start: 16200, rank_end: 16399, avg_marks: 36.18, avg_score: 441 },
            { rank_start: 16400, rank_end: 16599, avg_marks: 36.11, avg_score: 441 },
            { rank_start: 16600, rank_end: 16799, avg_marks: 36.04, avg_score: 440 },
            { rank_start: 16800, rank_end: 16999, avg_marks: 35.97, avg_score: 440 },
            { rank_start: 17000, rank_end: 17199, avg_marks: 35.9, avg_score: 439 },
            { rank_start: 17200, rank_end: 17399, avg_marks: 35.83, avg_score: 438 },
            { rank_start: 17400, rank_end: 17599, avg_marks: 35.77, avg_score: 438 },
            { rank_start: 17600, rank_end: 17799, avg_marks: 35.7, avg_score: 437 },
            { rank_start: 17800, rank_end: 17999, avg_marks: 35.64, avg_score: 437 },
            { rank_start: 18000, rank_end: 18199, avg_marks: 35.57, avg_score: 436 },
            { rank_start: 18200, rank_end: 18399, avg_marks: 35.51, avg_score: 436 },
            { rank_start: 18400, rank_end: 18599, avg_marks: 35.45, avg_score: 435 },
            { rank_start: 18600, rank_end: 18799, avg_marks: 35.39, avg_score: 435 },
            { rank_start: 18800, rank_end: 18999, avg_marks: 35.33, avg_score: 434 },
            { rank_start: 19000, rank_end: 19199, avg_marks: 35.27, avg_score: 434 },
            { rank_start: 19200, rank_end: 19399, avg_marks: 35.21, avg_score: 433 },
            { rank_start: 19400, rank_end: 19599, avg_marks: 35.15, avg_score: 433 },
            { rank_start: 19600, rank_end: 19799, avg_marks: 35.09, avg_score: 432 },
            { rank_start: 19800, rank_end: 20000, avg_marks: 35.03, avg_score: 432 }
        ];

        // ECE Data from CSV
        const eceRanges = [
            { rank_start: 1, rank_end: 199, avg_marks: 57.37, avg_score: 656 },
            { rank_start: 200, rank_end: 399, avg_marks: 51.31, avg_score: 599 },
            { rank_start: 400, rank_end: 599, avg_marks: 48.48, avg_score: 572 },
            { rank_start: 600, rank_end: 799, avg_marks: 46.61, avg_score: 554 },
            { rank_start: 800, rank_end: 999, avg_marks: 45.22, avg_score: 541 },
            { rank_start: 1000, rank_end: 1199, avg_marks: 44.11, avg_score: 531 },
            { rank_start: 1200, rank_end: 1399, avg_marks: 43.18, avg_score: 522 },
            { rank_start: 1400, rank_end: 1599, avg_marks: 42.38, avg_score: 514 },
            { rank_start: 1600, rank_end: 1799, avg_marks: 41.69, avg_score: 508 },
            { rank_start: 1800, rank_end: 1999, avg_marks: 41.07, avg_score: 502 },
            { rank_start: 2000, rank_end: 2199, avg_marks: 40.52, avg_score: 497 },
            { rank_start: 2200, rank_end: 2399, avg_marks: 40.01, avg_score: 492 },
            { rank_start: 2400, rank_end: 2599, avg_marks: 39.55, avg_score: 487 },
            { rank_start: 2600, rank_end: 2799, avg_marks: 39.12, avg_score: 483 },
            { rank_start: 2800, rank_end: 2999, avg_marks: 38.72, avg_score: 480 },
            { rank_start: 3000, rank_end: 3199, avg_marks: 38.35, avg_score: 476 },
            { rank_start: 3200, rank_end: 3399, avg_marks: 38.01, avg_score: 473 },
            { rank_start: 3400, rank_end: 3599, avg_marks: 37.68, avg_score: 470 },
            { rank_start: 3600, rank_end: 3799, avg_marks: 37.37, avg_score: 467 },
            { rank_start: 3800, rank_end: 3999, avg_marks: 37.08, avg_score: 464 },
            { rank_start: 4000, rank_end: 4199, avg_marks: 36.8, avg_score: 461 },
            { rank_start: 4200, rank_end: 4399, avg_marks: 36.54, avg_score: 459 },
            { rank_start: 4400, rank_end: 4599, avg_marks: 36.28, avg_score: 457 },
            { rank_start: 4600, rank_end: 4799, avg_marks: 36.04, avg_score: 454 },
            { rank_start: 4800, rank_end: 4999, avg_marks: 35.81, avg_score: 452 },
            { rank_start: 5000, rank_end: 5199, avg_marks: 35.59, avg_score: 450 },
            { rank_start: 5200, rank_end: 5399, avg_marks: 35.38, avg_score: 448 },
            { rank_start: 5400, rank_end: 5599, avg_marks: 35.17, avg_score: 446 },
            { rank_start: 5600, rank_end: 5799, avg_marks: 34.97, avg_score: 444 },
            { rank_start: 5800, rank_end: 5999, avg_marks: 34.78, avg_score: 442 },
            { rank_start: 6000, rank_end: 6199, avg_marks: 34.59, avg_score: 440 },
            { rank_start: 6200, rank_end: 6399, avg_marks: 34.42, avg_score: 439 },
            { rank_start: 6400, rank_end: 6599, avg_marks: 34.24, avg_score: 437 },
            { rank_start: 6600, rank_end: 6799, avg_marks: 34.07, avg_score: 436 },
            { rank_start: 6800, rank_end: 6999, avg_marks: 33.91, avg_score: 434 },
            { rank_start: 7000, rank_end: 7199, avg_marks: 33.75, avg_score: 432 },
            { rank_start: 7200, rank_end: 7399, avg_marks: 33.6, avg_score: 431 },
            { rank_start: 7400, rank_end: 7599, avg_marks: 33.45, avg_score: 430 },
            { rank_start: 7600, rank_end: 7799, avg_marks: 33.3, avg_score: 428 },
            { rank_start: 7800, rank_end: 7999, avg_marks: 33.16, avg_score: 427 },
            { rank_start: 8000, rank_end: 8199, avg_marks: 33.02, avg_score: 426 },
            { rank_start: 8200, rank_end: 8399, avg_marks: 32.88, avg_score: 424 },
            { rank_start: 8400, rank_end: 8599, avg_marks: 32.75, avg_score: 423 },
            { rank_start: 8600, rank_end: 8799, avg_marks: 32.62, avg_score: 422 },
            { rank_start: 8800, rank_end: 8999, avg_marks: 32.5, avg_score: 421 },
            { rank_start: 9000, rank_end: 9199, avg_marks: 32.37, avg_score: 419 },
            { rank_start: 9200, rank_end: 9399, avg_marks: 32.25, avg_score: 418 },
            { rank_start: 9400, rank_end: 9599, avg_marks: 32.13, avg_score: 417 },
            { rank_start: 9600, rank_end: 9799, avg_marks: 32.02, avg_score: 416 },
            { rank_start: 9800, rank_end: 9999, avg_marks: 31.91, avg_score: 415 },
            { rank_start: 10000, rank_end: 10199, avg_marks: 31.79, avg_score: 414 },
            { rank_start: 10200, rank_end: 10399, avg_marks: 31.69, avg_score: 413 },
            { rank_start: 10400, rank_end: 10599, avg_marks: 31.58, avg_score: 412 },
            { rank_start: 10600, rank_end: 10799, avg_marks: 31.47, avg_score: 411 },
            { rank_start: 10800, rank_end: 10999, avg_marks: 31.37, avg_score: 410 },
            { rank_start: 11000, rank_end: 11199, avg_marks: 31.27, avg_score: 409 },
            { rank_start: 11200, rank_end: 11399, avg_marks: 31.17, avg_score: 408 },
            { rank_start: 11400, rank_end: 11599, avg_marks: 31.07, avg_score: 407 },
            { rank_start: 11600, rank_end: 11799, avg_marks: 30.98, avg_score: 406 },
            { rank_start: 11800, rank_end: 11999, avg_marks: 30.88, avg_score: 405 },
            { rank_start: 12000, rank_end: 12199, avg_marks: 30.79, avg_score: 404 },
            { rank_start: 12200, rank_end: 12399, avg_marks: 30.7, avg_score: 404 },
            { rank_start: 12400, rank_end: 12599, avg_marks: 30.61, avg_score: 403 },
            { rank_start: 12600, rank_end: 12799, avg_marks: 30.52, avg_score: 402 },
            { rank_start: 12800, rank_end: 12999, avg_marks: 30.44, avg_score: 401 },
            { rank_start: 13000, rank_end: 13199, avg_marks: 30.35, avg_score: 400 },
            { rank_start: 13200, rank_end: 13399, avg_marks: 30.27, avg_score: 399 },
            { rank_start: 13400, rank_end: 13599, avg_marks: 30.18, avg_score: 399 },
            { rank_start: 13600, rank_end: 13799, avg_marks: 30.1, avg_score: 398 },
            { rank_start: 13800, rank_end: 13999, avg_marks: 30.02, avg_score: 397 },
            { rank_start: 14000, rank_end: 14199, avg_marks: 29.94, avg_score: 396 },
            { rank_start: 14200, rank_end: 14399, avg_marks: 29.86, avg_score: 396 },
            { rank_start: 14400, rank_end: 14599, avg_marks: 29.79, avg_score: 395 },
            { rank_start: 14600, rank_end: 14799, avg_marks: 29.71, avg_score: 394 },
            { rank_start: 14800, rank_end: 14999, avg_marks: 29.63, avg_score: 393 },
            { rank_start: 15000, rank_end: 15199, avg_marks: 29.56, avg_score: 393 },
            { rank_start: 15200, rank_end: 15399, avg_marks: 29.49, avg_score: 392 },
            { rank_start: 15400, rank_end: 15599, avg_marks: 29.42, avg_score: 391 },
            { rank_start: 15600, rank_end: 15799, avg_marks: 29.34, avg_score: 391 },
            { rank_start: 15800, rank_end: 15999, avg_marks: 29.27, avg_score: 390 },
            { rank_start: 16000, rank_end: 16199, avg_marks: 29.2, avg_score: 389 },
            { rank_start: 16200, rank_end: 16399, avg_marks: 29.14, avg_score: 389 },
            { rank_start: 16400, rank_end: 16599, avg_marks: 29.07, avg_score: 388 },
            { rank_start: 16600, rank_end: 16799, avg_marks: 29.0, avg_score: 387 },
            { rank_start: 16800, rank_end: 16999, avg_marks: 28.94, avg_score: 387 },
            { rank_start: 17000, rank_end: 17199, avg_marks: 28.87, avg_score: 386 },
            { rank_start: 17200, rank_end: 17399, avg_marks: 28.81, avg_score: 386 },
            { rank_start: 17400, rank_end: 17599, avg_marks: 28.74, avg_score: 385 },
            { rank_start: 17600, rank_end: 17799, avg_marks: 28.68, avg_score: 384 },
            { rank_start: 17800, rank_end: 17999, avg_marks: 28.62, avg_score: 384 },
            { rank_start: 18000, rank_end: 18199, avg_marks: 28.55, avg_score: 383 },
            { rank_start: 18200, rank_end: 18399, avg_marks: 28.49, avg_score: 383 },
            { rank_start: 18400, rank_end: 18599, avg_marks: 28.43, avg_score: 382 },
            { rank_start: 18600, rank_end: 18799, avg_marks: 28.37, avg_score: 381 },
            { rank_start: 18800, rank_end: 18999, avg_marks: 28.31, avg_score: 381 },
            { rank_start: 19000, rank_end: 19199, avg_marks: 28.26, avg_score: 380 },
            { rank_start: 19200, rank_end: 19399, avg_marks: 28.2, avg_score: 380 },
            { rank_start: 19400, rank_end: 19599, avg_marks: 28.14, avg_score: 379 },
            { rank_start: 19600, rank_end: 19799, avg_marks: 28.08, avg_score: 379 },
            { rank_start: 19800, rank_end: 20000, avg_marks: 28.03, avg_score: 378 }
        ];

        // EE Data from CSV
        const eeRanges = [
            { rank_start: 1, rank_end: 199, avg_marks: 58.44, avg_score: 656 },
            { rank_start: 200, rank_end: 399, avg_marks: 52.16, avg_score: 598 },
            { rank_start: 400, rank_end: 599, avg_marks: 49.23, avg_score: 572 },
            { rank_start: 600, rank_end: 799, avg_marks: 47.29, avg_score: 554 },
            { rank_start: 800, rank_end: 999, avg_marks: 45.85, avg_score: 541 },
            { rank_start: 1000, rank_end: 1199, avg_marks: 44.69, avg_score: 530 },
            { rank_start: 1200, rank_end: 1399, avg_marks: 43.73, avg_score: 521 },
            { rank_start: 1400, rank_end: 1599, avg_marks: 42.91, avg_score: 514 },
            { rank_start: 1600, rank_end: 1799, avg_marks: 42.19, avg_score: 507 },
            { rank_start: 1800, rank_end: 1999, avg_marks: 41.55, avg_score: 501 },
            { rank_start: 2000, rank_end: 2199, avg_marks: 40.97, avg_score: 496 },
            { rank_start: 2200, rank_end: 2399, avg_marks: 40.45, avg_score: 491 },
            { rank_start: 2400, rank_end: 2599, avg_marks: 39.97, avg_score: 487 },
            { rank_start: 2600, rank_end: 2799, avg_marks: 39.52, avg_score: 483 },
            { rank_start: 2800, rank_end: 2999, avg_marks: 39.11, avg_score: 479 },
            { rank_start: 3000, rank_end: 3199, avg_marks: 38.73, avg_score: 475 },
            { rank_start: 3200, rank_end: 3399, avg_marks: 38.37, avg_score: 472 },
            { rank_start: 3400, rank_end: 3599, avg_marks: 38.03, avg_score: 469 },
            { rank_start: 3600, rank_end: 3799, avg_marks: 37.71, avg_score: 466 },
            { rank_start: 3800, rank_end: 3999, avg_marks: 37.41, avg_score: 463 },
            { rank_start: 4000, rank_end: 4199, avg_marks: 37.12, avg_score: 461 },
            { rank_start: 4200, rank_end: 4399, avg_marks: 36.85, avg_score: 458 },
            { rank_start: 4400, rank_end: 4599, avg_marks: 36.58, avg_score: 456 },
            { rank_start: 4600, rank_end: 4799, avg_marks: 36.33, avg_score: 453 },
            { rank_start: 4800, rank_end: 4999, avg_marks: 36.09, avg_score: 451 },
            { rank_start: 5000, rank_end: 5199, avg_marks: 35.86, avg_score: 449 },
            { rank_start: 5200, rank_end: 5399, avg_marks: 35.64, avg_score: 447 },
            { rank_start: 5400, rank_end: 5599, avg_marks: 35.43, avg_score: 445 },
            { rank_start: 5600, rank_end: 5799, avg_marks: 35.22, avg_score: 443 },
            { rank_start: 5800, rank_end: 5999, avg_marks: 35.03, avg_score: 441 },
            { rank_start: 6000, rank_end: 6199, avg_marks: 34.83, avg_score: 440 },
            { rank_start: 6200, rank_end: 6399, avg_marks: 34.65, avg_score: 438 },
            { rank_start: 6400, rank_end: 6599, avg_marks: 34.47, avg_score: 436 },
            { rank_start: 6600, rank_end: 6799, avg_marks: 34.29, avg_score: 435 },
            { rank_start: 6800, rank_end: 6999, avg_marks: 34.12, avg_score: 433 },
            { rank_start: 7000, rank_end: 7199, avg_marks: 33.96, avg_score: 432 },
            { rank_start: 7200, rank_end: 7399, avg_marks: 33.8, avg_score: 430 },
            { rank_start: 7400, rank_end: 7599, avg_marks: 33.65, avg_score: 429 },
            { rank_start: 7600, rank_end: 7799, avg_marks: 33.49, avg_score: 427 },
            { rank_start: 7800, rank_end: 7999, avg_marks: 33.35, avg_score: 426 },
            { rank_start: 8000, rank_end: 8199, avg_marks: 33.2, avg_score: 425 },
            { rank_start: 8200, rank_end: 8399, avg_marks: 33.06, avg_score: 423 },
            { rank_start: 8400, rank_end: 8599, avg_marks: 32.92, avg_score: 422 },
            { rank_start: 8600, rank_end: 8799, avg_marks: 32.79, avg_score: 421 },
            { rank_start: 8800, rank_end: 8999, avg_marks: 32.66, avg_score: 420 },
            { rank_start: 9000, rank_end: 9199, avg_marks: 32.53, avg_score: 419 },
            { rank_start: 9200, rank_end: 9399, avg_marks: 32.41, avg_score: 417 },
            { rank_start: 9400, rank_end: 9599, avg_marks: 32.28, avg_score: 416 },
            { rank_start: 9600, rank_end: 9799, avg_marks: 32.16, avg_score: 415 },
            { rank_start: 9800, rank_end: 9999, avg_marks: 32.05, avg_score: 414 },
            { rank_start: 10000, rank_end: 10199, avg_marks: 31.93, avg_score: 413 },
            { rank_start: 10200, rank_end: 10399, avg_marks: 31.82, avg_score: 412 },
            { rank_start: 10400, rank_end: 10599, avg_marks: 31.71, avg_score: 411 },
            { rank_start: 10600, rank_end: 10799, avg_marks: 31.6, avg_score: 410 },
            { rank_start: 10800, rank_end: 10999, avg_marks: 31.49, avg_score: 409 },
            { rank_start: 11000, rank_end: 11199, avg_marks: 31.39, avg_score: 408 },
            { rank_start: 11200, rank_end: 11399, avg_marks: 31.29, avg_score: 407 },
            { rank_start: 11400, rank_end: 11599, avg_marks: 31.19, avg_score: 406 },
            { rank_start: 11600, rank_end: 11799, avg_marks: 31.09, avg_score: 405 },
            { rank_start: 11800, rank_end: 11999, avg_marks: 30.99, avg_score: 404 },
            { rank_start: 12000, rank_end: 12199, avg_marks: 30.89, avg_score: 404 },
            { rank_start: 12200, rank_end: 12399, avg_marks: 30.8, avg_score: 403 },
            { rank_start: 12400, rank_end: 12599, avg_marks: 30.71, avg_score: 402 },
            { rank_start: 12600, rank_end: 12799, avg_marks: 30.61, avg_score: 401 },
            { rank_start: 12800, rank_end: 12999, avg_marks: 30.52, avg_score: 400 },
            { rank_start: 13000, rank_end: 13199, avg_marks: 30.44, avg_score: 399 },
            { rank_start: 13200, rank_end: 13399, avg_marks: 30.35, avg_score: 399 },
            { rank_start: 13400, rank_end: 13599, avg_marks: 30.26, avg_score: 398 },
            { rank_start: 13600, rank_end: 13799, avg_marks: 30.18, avg_score: 397 },
            { rank_start: 13800, rank_end: 13999, avg_marks: 30.09, avg_score: 396 },
            { rank_start: 14000, rank_end: 14199, avg_marks: 30.01, avg_score: 395 },
            { rank_start: 14200, rank_end: 14399, avg_marks: 29.93, avg_score: 395 },
            { rank_start: 14400, rank_end: 14599, avg_marks: 29.85, avg_score: 394 },
            { rank_start: 14600, rank_end: 14799, avg_marks: 29.77, avg_score: 393 },
            { rank_start: 14800, rank_end: 14999, avg_marks: 29.69, avg_score: 393 },
            { rank_start: 15000, rank_end: 15199, avg_marks: 29.62, avg_score: 392 },
            { rank_start: 15200, rank_end: 15399, avg_marks: 29.54, avg_score: 391 },
            { rank_start: 15400, rank_end: 15599, avg_marks: 29.47, avg_score: 390 },
            { rank_start: 15600, rank_end: 15799, avg_marks: 29.39, avg_score: 390 },
            { rank_start: 15800, rank_end: 15999, avg_marks: 29.32, avg_score: 389 },
            { rank_start: 16000, rank_end: 16199, avg_marks: 29.25, avg_score: 388 },
            { rank_start: 16200, rank_end: 16399, avg_marks: 29.18, avg_score: 388 },
            { rank_start: 16400, rank_end: 16599, avg_marks: 29.11, avg_score: 387 },
            { rank_start: 16600, rank_end: 16799, avg_marks: 29.04, avg_score: 387 },
            { rank_start: 16800, rank_end: 16999, avg_marks: 28.97, avg_score: 386 },
            { rank_start: 17000, rank_end: 17199, avg_marks: 28.9, avg_score: 385 },
            { rank_start: 17200, rank_end: 17399, avg_marks: 28.83, avg_score: 385 },
            { rank_start: 17400, rank_end: 17599, avg_marks: 28.77, avg_score: 384 },
            { rank_start: 17600, rank_end: 17799, avg_marks: 28.7, avg_score: 383 },
            { rank_start: 17800, rank_end: 17999, avg_marks: 28.64, avg_score: 383 },
            { rank_start: 18000, rank_end: 18199, avg_marks: 28.57, avg_score: 382 },
            { rank_start: 18200, rank_end: 18399, avg_marks: 28.51, avg_score: 382 },
            { rank_start: 18400, rank_end: 18599, avg_marks: 28.45, avg_score: 381 },
            { rank_start: 18600, rank_end: 18799, avg_marks: 28.39, avg_score: 381 },
            { rank_start: 18800, rank_end: 18999, avg_marks: 28.33, avg_score: 380 },
            { rank_start: 19000, rank_end: 19199, avg_marks: 28.27, avg_score: 379 },
            { rank_start: 19200, rank_end: 19399, avg_marks: 28.21, avg_score: 379 },
            { rank_start: 19400, rank_end: 19599, avg_marks: 28.15, avg_score: 378 },
            { rank_start: 19600, rank_end: 19799, avg_marks: 28.09, avg_score: 378 },
            { rank_start: 19800, rank_end: 20000, avg_marks: 28.03, avg_score: 377 }
        ];

        // ME Data from CSV
        const meRanges = [
            { rank_start: 1, rank_end: 199, avg_marks: 60.44, avg_score: 664 },
            { rank_start: 200, rank_end: 399, avg_marks: 54.16, avg_score: 608 },
            { rank_start: 400, rank_end: 599, avg_marks: 51.23, avg_score: 582 },
            { rank_start: 600, rank_end: 799, avg_marks: 49.29, avg_score: 565 },
            { rank_start: 800, rank_end: 999, avg_marks: 47.85, avg_score: 552 },
            { rank_start: 1000, rank_end: 1199, avg_marks: 46.69, avg_score: 542 },
            { rank_start: 1200, rank_end: 1399, avg_marks: 45.73, avg_score: 533 },
            { rank_start: 1400, rank_end: 1599, avg_marks: 44.91, avg_score: 526 },
            { rank_start: 1600, rank_end: 1799, avg_marks: 44.19, avg_score: 520 },
            { rank_start: 1800, rank_end: 1999, avg_marks: 43.55, avg_score: 514 },
            { rank_start: 2000, rank_end: 2199, avg_marks: 42.97, avg_score: 509 },
            { rank_start: 2200, rank_end: 2399, avg_marks: 42.45, avg_score: 504 },
            { rank_start: 2400, rank_end: 2599, avg_marks: 41.97, avg_score: 500 },
            { rank_start: 2600, rank_end: 2799, avg_marks: 41.52, avg_score: 496 },
            { rank_start: 2800, rank_end: 2999, avg_marks: 41.11, avg_score: 492 },
            { rank_start: 3000, rank_end: 3199, avg_marks: 40.73, avg_score: 489 },
            { rank_start: 3200, rank_end: 3399, avg_marks: 40.37, avg_score: 486 },
            { rank_start: 3400, rank_end: 3599, avg_marks: 40.03, avg_score: 483 },
            { rank_start: 3600, rank_end: 3799, avg_marks: 39.71, avg_score: 480 },
            { rank_start: 3800, rank_end: 3999, avg_marks: 39.41, avg_score: 477 },
            { rank_start: 4000, rank_end: 4199, avg_marks: 39.12, avg_score: 475 },
            { rank_start: 4200, rank_end: 4399, avg_marks: 38.85, avg_score: 472 },
            { rank_start: 4400, rank_end: 4599, avg_marks: 38.58, avg_score: 470 },
            { rank_start: 4600, rank_end: 4799, avg_marks: 38.33, avg_score: 468 },
            { rank_start: 4800, rank_end: 4999, avg_marks: 38.09, avg_score: 466 },
            { rank_start: 5000, rank_end: 5199, avg_marks: 37.86, avg_score: 464 },
            { rank_start: 5200, rank_end: 5399, avg_marks: 37.64, avg_score: 462 },
            { rank_start: 5400, rank_end: 5599, avg_marks: 37.43, avg_score: 460 },
            { rank_start: 5600, rank_end: 5799, avg_marks: 37.22, avg_score: 458 },
            { rank_start: 5800, rank_end: 5999, avg_marks: 37.03, avg_score: 456 },
            { rank_start: 6000, rank_end: 6199, avg_marks: 36.83, avg_score: 454 },
            { rank_start: 6200, rank_end: 6399, avg_marks: 36.65, avg_score: 453 },
            { rank_start: 6400, rank_end: 6599, avg_marks: 36.47, avg_score: 451 },
            { rank_start: 6600, rank_end: 6799, avg_marks: 36.29, avg_score: 450 },
            { rank_start: 6800, rank_end: 6999, avg_marks: 36.12, avg_score: 448 },
            { rank_start: 7000, rank_end: 7199, avg_marks: 35.96, avg_score: 447 },
            { rank_start: 7200, rank_end: 7399, avg_marks: 35.8, avg_score: 445 },
            { rank_start: 7400, rank_end: 7599, avg_marks: 35.65, avg_score: 444 },
            { rank_start: 7600, rank_end: 7799, avg_marks: 35.49, avg_score: 443 },
            { rank_start: 7800, rank_end: 7999, avg_marks: 35.35, avg_score: 441 },
            { rank_start: 8000, rank_end: 8199, avg_marks: 35.2, avg_score: 440 },
            { rank_start: 8200, rank_end: 8399, avg_marks: 35.06, avg_score: 439 },
            { rank_start: 8400, rank_end: 8599, avg_marks: 34.92, avg_score: 438 },
            { rank_start: 8600, rank_end: 8799, avg_marks: 34.79, avg_score: 436 },
            { rank_start: 8800, rank_end: 8999, avg_marks: 34.66, avg_score: 435 },
            { rank_start: 9000, rank_end: 9199, avg_marks: 34.53, avg_score: 434 },
            { rank_start: 9200, rank_end: 9399, avg_marks: 34.41, avg_score: 433 },
            { rank_start: 9400, rank_end: 9599, avg_marks: 34.28, avg_score: 432 },
            { rank_start: 9600, rank_end: 9799, avg_marks: 34.16, avg_score: 431 },
            { rank_start: 9800, rank_end: 9999, avg_marks: 34.05, avg_score: 430 },
            { rank_start: 10000, rank_end: 10199, avg_marks: 33.93, avg_score: 429 },
            { rank_start: 10200, rank_end: 10399, avg_marks: 33.82, avg_score: 428 },
            { rank_start: 10400, rank_end: 10599, avg_marks: 33.71, avg_score: 427 },
            { rank_start: 10600, rank_end: 10799, avg_marks: 33.6, avg_score: 426 },
            { rank_start: 10800, rank_end: 10999, avg_marks: 33.49, avg_score: 425 },
            { rank_start: 11000, rank_end: 11199, avg_marks: 33.39, avg_score: 424 },
            { rank_start: 11200, rank_end: 11399, avg_marks: 33.29, avg_score: 423 },
            { rank_start: 11400, rank_end: 11599, avg_marks: 33.19, avg_score: 422 },
            { rank_start: 11600, rank_end: 11799, avg_marks: 33.09, avg_score: 421 },
            { rank_start: 11800, rank_end: 11999, avg_marks: 32.99, avg_score: 420 },
            { rank_start: 12000, rank_end: 12199, avg_marks: 32.89, avg_score: 420 },
            { rank_start: 12200, rank_end: 12399, avg_marks: 32.8, avg_score: 419 },
            { rank_start: 12400, rank_end: 12599, avg_marks: 32.71, avg_score: 418 },
            { rank_start: 12600, rank_end: 12799, avg_marks: 32.61, avg_score: 417 },
            { rank_start: 12800, rank_end: 12999, avg_marks: 32.52, avg_score: 416 },
            { rank_start: 13000, rank_end: 13199, avg_marks: 32.44, avg_score: 415 },
            { rank_start: 13200, rank_end: 13399, avg_marks: 32.35, avg_score: 415 },
            { rank_start: 13400, rank_end: 13599, avg_marks: 32.26, avg_score: 414 },
            { rank_start: 13600, rank_end: 13799, avg_marks: 32.18, avg_score: 413 },
            { rank_start: 13800, rank_end: 13999, avg_marks: 32.09, avg_score: 412 },
            { rank_start: 14000, rank_end: 14199, avg_marks: 32.01, avg_score: 412 },
            { rank_start: 14200, rank_end: 14399, avg_marks: 31.93, avg_score: 411 },
            { rank_start: 14400, rank_end: 14599, avg_marks: 31.85, avg_score: 410 },
            { rank_start: 14600, rank_end: 14799, avg_marks: 31.77, avg_score: 410 },
            { rank_start: 14800, rank_end: 14999, avg_marks: 31.69, avg_score: 409 },
            { rank_start: 15000, rank_end: 15199, avg_marks: 31.62, avg_score: 408 },
            { rank_start: 15200, rank_end: 15399, avg_marks: 31.54, avg_score: 408 },
            { rank_start: 15400, rank_end: 15599, avg_marks: 31.47, avg_score: 407 },
            { rank_start: 15600, rank_end: 15799, avg_marks: 31.39, avg_score: 406 },
            { rank_start: 15800, rank_end: 15999, avg_marks: 31.32, avg_score: 406 },
            { rank_start: 16000, rank_end: 16199, avg_marks: 31.25, avg_score: 405 },
            { rank_start: 16200, rank_end: 16399, avg_marks: 31.18, avg_score: 404 },
            { rank_start: 16400, rank_end: 16599, avg_marks: 31.11, avg_score: 404 },
            { rank_start: 16600, rank_end: 16799, avg_marks: 31.04, avg_score: 403 },
            { rank_start: 16800, rank_end: 16999, avg_marks: 30.97, avg_score: 402 },
            { rank_start: 17000, rank_end: 17199, avg_marks: 30.9, avg_score: 402 },
            { rank_start: 17200, rank_end: 17399, avg_marks: 30.83, avg_score: 401 },
            { rank_start: 17400, rank_end: 17599, avg_marks: 30.77, avg_score: 401 },
            { rank_start: 17600, rank_end: 17799, avg_marks: 30.7, avg_score: 400 },
            { rank_start: 17800, rank_end: 17999, avg_marks: 30.64, avg_score: 400 },
            { rank_start: 18000, rank_end: 18199, avg_marks: 30.57, avg_score: 399 },
            { rank_start: 18200, rank_end: 18399, avg_marks: 30.51, avg_score: 398 },
            { rank_start: 18400, rank_end: 18599, avg_marks: 30.45, avg_score: 398 },
            { rank_start: 18600, rank_end: 18799, avg_marks: 30.39, avg_score: 397 },
            { rank_start: 18800, rank_end: 18999, avg_marks: 30.33, avg_score: 397 },
            { rank_start: 19000, rank_end: 19199, avg_marks: 30.27, avg_score: 396 },
            { rank_start: 19200, rank_end: 19399, avg_marks: 30.21, avg_score: 396 },
            { rank_start: 19400, rank_end: 19599, avg_marks: 30.15, avg_score: 395 },
            { rank_start: 19600, rank_end: 19799, avg_marks: 30.09, avg_score: 395 },
            { rank_start: 19800, rank_end: 20000, avg_marks: 30.03, avg_score: 394 }
        ];

        // =====================================================
        // GENERATE POINTS FOR ALL BRANCHES (with 2026 adjustments)
        // =====================================================
        
        // For branches with ±5% change, adjust rank accordingly
        const ceAdjust = students2026["CE"] / students2025["CE"]; // 1.05 for 5% increase
        const eeAdjust = students2026["EE"] / students2025["EE"]; // 0.95 for 5% decrease
        const eceAdjust = students2026["ECE"] / students2025["ECE"]; // 1.05 for 5% increase
        const meAdjust = students2026["ME"] / students2025["ME"]; // 0.95 for 5% decrease
        const daAdjust = students2026["DA"] / students2025["DA"]; // 1.05 for 5% increase

        const branchRankData = {
            // CSE with 12% increase
            "CS": getCSE2026Data(),
            
            // CE with 5% increase
            "CE": convertRangeToPoints(ceRanges, "CE", ceAdjust),
            
            // EE with 5% decrease
            "EE": convertRangeToPoints(eeRanges, "EE", eeAdjust),
            
            // ECE with 5% increase
            "ECE": convertRangeToPoints(eceRanges, "ECE", eceAdjust),
            
            // ME with 5% decrease
            "ME": convertRangeToPoints(meRanges, "ME", meAdjust),
            
            // DA with 5% increase
            "DA": convertRangeToPoints(daRanges, "DA", daAdjust)
        };

        // Add data for other branches (scaled from similar branches)
        branchRankData["IN"] = branchRankData["EE"].map(d => ({ 
            rank: Math.round(d.rank * 1.0), 
            marks: d.marks * 0.96,
            score: Math.round(d.score * 0.96)
        }));
        
        branchRankData["PI"] = branchRankData["ME"].map(d => ({ 
            rank: Math.round(d.rank * 1.0), 
            marks: d.marks * 0.95,
            score: Math.round(d.score * 0.95)
        }));
        
        branchRankData["XE"] = branchRankData["ME"].map(d => ({ 
            rank: Math.round(d.rank * 1.0), 
            marks: d.marks * 0.92,
            score: Math.round(d.score * 0.92)
        }));
        
        branchRankData["ES"] = branchRankData["CE"].map(d => ({ 
            rank: Math.round(d.rank * 1.0), 
            marks: d.marks * 0.90,
            score: Math.round(d.score * 0.90)
        }));
        
        branchRankData["CH"] = branchRankData["CE"].map(d => ({ 
            rank: Math.round(d.rank * 1.0), 
            marks: d.marks * 0.94,
            score: Math.round(d.score * 0.94)
        }));

        // =====================================================
        // GATE 2026 CUTOFFS (Updated based on branch difficulty)
        // =====================================================
        
        const gateCutoffs2026 = {
            "CE": { GEN: "30-32", OBC: "27-29", SC: "20-22", ST: "20-22", PWD: "20-22", EWS: "27-29" },
            "ME": { GEN: "32-34", OBC: "29-31", SC: "22-24", ST: "22-24", PWD: "22-24", EWS: "29-31" },
            "EE": { GEN: "26-28", OBC: "23-25", SC: "17-19", ST: "17-19", PWD: "17-19", EWS: "23-25" },
            "ECE": { GEN: "27-29", OBC: "24-26", SC: "18-20", ST: "18-20", PWD: "18-20", EWS: "24-26" },
            "CS": { GEN: "29-31", OBC: "26-28", SC: "19-21", ST: "19-21", PWD: "19-21", EWS: "26-28" },
            "IN": { GEN: "28-30", OBC: "25-27", SC: "18-20", ST: "18-20", PWD: "18-20", EWS: "25-27" },
            "PI": { GEN: "30-32", OBC: "27-29", SC: "20-22", ST: "20-22", PWD: "20-22", EWS: "27-29" },
            "XE": { GEN: "29-31", OBC: "26-28", SC: "19-21", ST: "19-21", PWD: "19-21", EWS: "26-28" },
            "ES": { GEN: "28-30", OBC: "25-27", SC: "18-20", ST: "18-20", PWD: "18-20", EWS: "25-27" },
            "CH": { GEN: "29-31", OBC: "26-28", SC: "19-21", ST: "19-21", PWD: "19-21", EWS: "26-28" },
            "DA": { GEN: "34-36", OBC: "31-33", SC: "24-26", ST: "24-26", PWD: "24-26", EWS: "31-33" }
        };

        const gateCutoffsMid = {
            "CE": { GEN: 31.0, OBC: 28.0, SC: 21.0, ST: 21.0, PWD: 21.0, EWS: 28.0 },
            "ME": { GEN: 33.0, OBC: 30.0, SC: 23.0, ST: 23.0, PWD: 23.0, EWS: 30.0 },
            "EE": { GEN: 27.0, OBC: 24.0, SC: 18.0, ST: 18.0, PWD: 18.0, EWS: 24.0 },
            "ECE": { GEN: 28.0, OBC: 25.0, SC: 19.0, ST: 19.0, PWD: 19.0, EWS: 25.0 },
            "CS": { GEN: 30.0, OBC: 27.0, SC: 20.0, ST: 20.0, PWD: 20.0, EWS: 27.0 },
            "IN": { GEN: 29.0, OBC: 26.0, SC: 19.0, ST: 19.0, PWD: 19.0, EWS: 26.0 },
            "PI": { GEN: 31.0, OBC: 28.0, SC: 21.0, ST: 21.0, PWD: 21.0, EWS: 28.0 },
            "XE": { GEN: 30.0, OBC: 27.0, SC: 20.0, ST: 20.0, PWD: 20.0, EWS: 27.0 },
            "ES": { GEN: 29.0, OBC: 26.0, SC: 19.0, ST: 19.0, PWD: 19.0, EWS: 26.0 },
            "CH": { GEN: 30.0, OBC: 27.0, SC: 20.0, ST: 20.0, PWD: 20.0, EWS: 27.0 },
            "DA": { GEN: 35.0, OBC: 32.0, SC: 25.0, ST: 25.0, PWD: 25.0, EWS: 32.0 }
        };

        // IIT Admission Marks by Category
        const iitAdmissionRanges = {
            "CS": {
                "GEN": { top: "75-80+", middle: "65-75", lower: "55-65" },
                "OBC": { top: "65-70", middle: "60-65", lower: "50-60" },
                "EWS": { top: "65-70", middle: "60-65", lower: "50-60" },
                "SC": { top: "48-53", middle: "38-48", lower: "30-38" },
                "ST": { top: "45-50", middle: "35-45", lower: "28-35" },
                "PWD": { top: "40-45", middle: "30-40", lower: "25-30" }
            },
            "CE": {
                "GEN": { top: "70-75+", middle: "60-70", lower: "50-60" },
                "OBC": { top: "60-65", middle: "55-60", lower: "45-55" },
                "SC": { top: "45-50", middle: "35-45", lower: "28-35" },
                "ST": { top: "42-47", middle: "32-42", lower: "25-32" }
            },
            "ME": {
                "GEN": { top: "68-73+", middle: "58-68", lower: "48-58" },
                "OBC": { top: "58-63", middle: "53-58", lower: "43-53" },
                "SC": { top: "43-48", middle: "33-43", lower: "26-33" },
                "ST": { top: "40-45", middle: "30-40", lower: "23-30" }
            }
        };

        // PSU Chances Data for all branches
        const psuChancesData = {
            "CS": [
                { marks: "75+", chance: "Very High", companies: "ISRO, DRDO, BARC, BEL, Google, Microsoft" },
                { marks: "65-75", chance: "High", companies: "NTPC, ONGC, GAIL, BHEL, IOCL" },
                { marks: "55-65", chance: "Moderate", companies: "HPCL, BPCL, SAIL, NPCIL" },
                { marks: "45-55", chance: "Low-Moderate", companies: "State PSUs, Power Grid" },
                { marks: "35-45", chance: "Low", companies: "State PSUs, Private Sector" },
                { marks: "25-35", chance: "Very Low", companies: "Private Sector" },
                { marks: "<25", chance: "Unlikely", companies: "Private Sector" }
            ],
            "CE": [
                { marks: "70+", chance: "Very High", companies: "NHAI, NBCC, DRDO, BHEL, L&T" },
                { marks: "60-70", chance: "High", companies: "ONGC, IOCL, GAIL, SAIL" },
                { marks: "50-60", chance: "Moderate", companies: "NTPC, PGCIL, State PSUs" },
                { marks: "40-50", chance: "Low-Moderate", companies: "State PWD, Municipal Corp" },
                { marks: "30-40", chance: "Low", companies: "Private Construction" },
                { marks: "<30", chance: "Unlikely", companies: "Private Sector" }
            ],
            "ME": [
                { marks: "68+", chance: "Very High", companies: "BHEL, DRDO, ISRO, NTPC, L&T" },
                { marks: "58-68", chance: "High", companies: "ONGC, GAIL, SAIL, IOCL" },
                { marks: "48-58", chance: "Moderate", companies: "BPCL, HPCL, NPCIL" },
                { marks: "38-48", chance: "Low-Moderate", companies: "State PSUs, Automotive" },
                { marks: "28-38", chance: "Low", companies: "Private Manufacturing" },
                { marks: "<28", chance: "Unlikely", companies: "Private Sector" }
            ],
            "EE": [
                { marks: "70+", chance: "Very High", companies: "Power Grid, NTPC, BHEL, DRDO" },
                { marks: "60-70", chance: "High", companies: "ONGC, GAIL, IOCL, SAIL" },
                { marks: "50-60", chance: "Moderate", companies: "State Electricity Boards" },
                { marks: "40-50", chance: "Low-Moderate", companies: "Private Power Companies" },
                { marks: "30-40", chance: "Low", companies: "Private Sector" },
                { marks: "<30", chance: "Unlikely", companies: "Private Sector" }
            ],
            "ECE": [
                { marks: "68+", chance: "Very High", companies: "ISRO, DRDO, BARC, BEL" },
                { marks: "58-68", chance: "High", companies: "NTPC, ONGC, GAIL, BHEL" },
                { marks: "48-58", chance: "Moderate", companies: "IOCL, HPCL, BPCL" },
                { marks: "38-48", chance: "Low-Moderate", companies: "Telecom Companies" },
                { marks: "28-38", chance: "Low", companies: "Private Electronics" },
                { marks: "<28", chance: "Unlikely", companies: "Private Sector" }
            ],
            "DA": [
                { marks: "75+", chance: "Very High", companies: "ISRO, DRDO, BARC, Google, Microsoft" },
                { marks: "65-75", chance: "High", companies: "NTPC, ONGC, GAIL, BHEL" },
                { marks: "55-65", chance: "Moderate", companies: "IOCL, HPCL, BPCL" },
                { marks: "45-55", chance: "Low-Moderate", companies: "State PSUs" },
                { marks: "35-45", chance: "Low", companies: "Private Sector" },
                { marks: "<35", chance: "Unlikely", companies: "Private Sector" }
            ]
        };

        // Set default PSU data for all branches
        psuChancesData["IN"] = psuChancesData["EE"];
        psuChancesData["PI"] = psuChancesData["ME"];
        psuChancesData["XE"] = psuChancesData["ME"];
        psuChancesData["ES"] = psuChancesData["CE"];
        psuChancesData["CH"] = psuChancesData["CE"];

        // =====================================================
        // CSE 2026 DATA (12% competition increase)
        // =====================================================
        
        function getCSE2026Data() {
            return cse2025Data.map(point => ({
                rank: Math.round(point.rank * 1.12),
                marks: point.marks,
                score: point.score
            }));
        }

        let rankChart = null;
        let currentCategory = 'GEN';
        let currentPredictionData = null;
        let currentGraphView = 'all';

        // Select category function
        function selectCategory(category, event) {
            currentCategory = category;
            document.getElementById('category').value = category;
            
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateMarks();
        }

        // Set value helper
        function setValue(elementId, value, event) {
            const inputElement = document.getElementById(elementId);
            const otherElementId = elementId.includes('Correct') ? 
                                  elementId.replace('Correct', 'Wrong') : 
                                  elementId.replace('Wrong', 'Correct');
            const otherElement = document.getElementById(otherElementId);
            
            const totalLimit = elementId.includes('type1') ? 30 : 35;
            const currentOtherValue = parseInt(otherElement.value) || 0;
            const newTotal = currentOtherValue + value;
            
            if (newTotal > totalLimit) {
                const excess = newTotal - totalLimit;
                otherElement.value = Math.max(0, currentOtherValue - excess);
                inputElement.value = value;
            } else {
                inputElement.value = value;
            }
            
            const parentDiv = inputElement.closest('.input-group');
            if (parentDiv) {
                parentDiv.querySelectorAll('.quick-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
            }
            
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            updateMarks();
        }

        // Update marks calculation
        function updateMarks() {
            const type1Correct = parseInt(document.getElementById('type1Correct').value) || 0;
            const type1Wrong = parseInt(document.getElementById('type1Wrong').value) || 0;
            const type2Correct = parseInt(document.getElementById('type2Correct').value) || 0;
            const type2Wrong = parseInt(document.getElementById('type2Wrong').value) || 0;
            
            const type1Total = type1Correct + type1Wrong;
            const type2Total = type2Correct + type2Wrong;
            
            document.getElementById('type1Total').textContent = type1Total;
            document.getElementById('type2Total').textContent = type2Total;
            
            if (type1Total > 30) {
                document.getElementById('type1Total').style.color = 'var(--danger)';
                document.getElementById('type1Total').style.fontWeight = 'bold';
            } else {
                document.getElementById('type1Total').style.color = '#666';
                document.getElementById('type1Total').style.fontWeight = 'normal';
            }
            
            if (type2Total > 35) {
                document.getElementById('type2Total').style.color = 'var(--danger)';
                document.getElementById('type2Total').style.fontWeight = 'bold';
            } else {
                document.getElementById('type2Total').style.color = '#666';
                document.getElementById('type2Total').style.fontWeight = 'normal';
            }
            
            const type1Marks = type1Correct - (type1Wrong * 0.33);
            const type2Marks = (type2Correct * 2) - (type2Wrong * 0.67);
            const totalMarks = type1Marks + type2Marks;
            
            document.getElementById('type1Marks').textContent = type1Marks.toFixed(2);
            document.getElementById('type2Marks').textContent = type2Marks.toFixed(2);
            document.getElementById('totalMarks').textContent = totalMarks.toFixed(2);
            document.getElementById('type1Details').textContent = `${type1Correct}✓ ${type1Wrong}✗`;
            document.getElementById('type2Details').textContent = `${type2Correct}✓ ${type2Wrong}✗`;
            
            document.getElementById('resultsSection').classList.remove('visible');
        }

        // Calculate rank from marks using interpolation
        function calculateRankFromMarks(marks, paper) {
            const data = branchRankData[paper] || branchRankData["CS"];
            const totalCandidates = students2026[paper] || students2026["CS"];
            
            // Sort data by marks descending
            const sortedData = [...data].sort((a, b) => b.marks - a.marks);
            
            // Handle edge cases
            if (marks <= 0) return totalCandidates;
            if (marks >= sortedData[0].marks) return 1;
            
            // Find where marks falls in the data
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (marks <= sortedData[i].marks && marks > sortedData[i + 1].marks) {
                    const higher = sortedData[i];
                    const lower = sortedData[i + 1];
                    
                    // Linear interpolation formula
                    const marksDiff = higher.marks - lower.marks;
                    const rankDiff = lower.rank - higher.rank;
                    const fraction = (higher.marks - marks) / marksDiff;
                    
                    return Math.round(higher.rank + (fraction * rankDiff));
                }
            }
            
            // If marks is below all data points, return last rank
            return totalCandidates;
        }

        // Calculate GATE score using branch-specific data
        function calculateScoreFromMarks(marks, paper) {
            const data = branchRankData[paper] || branchRankData["CS"];
            
            if (marks <= 0) return 0;
            if (marks >= data[0].marks) return data[0].score;
            
            // Find where marks falls in the data
            for (let i = 0; i < data.length - 1; i++) {
                if (marks <= data[i].marks && marks > data[i + 1].marks) {
                    const higher = data[i];
                    const lower = data[i + 1];
                    
                    // Linear interpolation for score
                    const marksDiff = higher.marks - lower.marks;
                    const scoreDiff = lower.score - higher.score;
                    const fraction = (higher.marks - marks) / marksDiff;
                    
                    return Math.round(higher.score + (fraction * scoreDiff));
                }
            }
            
            // If marks is below all data points, extrapolate
            const lastPoint = data[data.length - 1];
            return Math.max(0, Math.round(lastPoint.score * (marks / lastPoint.marks)));
        }

        // Calculate percentile
        function calculatePercentile(rank, paper) {
            const totalCandidates = students2026[paper] || students2026["CS"];
            if (rank <= 0) return 99.99;
            if (rank >= totalCandidates) return 0.01;
            
            const percentile = ((totalCandidates - rank) / totalCandidates) * 100;
            return Math.min(99.99, Math.max(0.01, percentile.toFixed(2)));
        }

        // Get cutoff for selected paper and category
        function getCutoff(paper, category) {
            const cutoffData = gateCutoffsMid[paper];
            if (!cutoffData) return 30.0;
            return cutoffData[category] || 30.0;
        }

        // Create IIT Admission Grid
        function createIITAdmissionGrid(paper, category, userMarks) {
            const paperData = iitAdmissionRanges[paper] || iitAdmissionRanges["CS"];
            const ranges = paperData[category] || paperData["GEN"];
            
            const iitTypes = [
                { name: "Top IITs", desc: "IIT Bombay, Delhi, Madras, Kanpur, Kharagpur", marks: ranges.top },
                { name: "Mid IITs", desc: "IIT Roorkee, Guwahati, Hyderabad, Indore", marks: ranges.middle },
                { name: "New IITs", desc: "IIT Patna, Mandi, Jodhpur, Gandhinagar, Ropar", marks: ranges.lower }
            ];
            
            let html = '<div class="iit-grid">';
            
            iitTypes.forEach(iit => {
                const marksRange = iit.marks;
                let isPossible = false;
                
                if (marksRange.includes('+')) {
                    const minMark = parseInt(marksRange.replace('+', ''));
                    isPossible = userMarks >= minMark;
                } else if (marksRange.includes('-')) {
                    const [minMark, maxMark] = marksRange.split('-').map(m => parseInt(m));
                    isPossible = userMarks >= minMark;
                } else {
                    isPossible = userMarks >= parseInt(marksRange);
                }
                
                html += `
                    <div class="iit-card" style="${isPossible ? 'border-top-color: var(--success);' : ''}">
                        <h5>${iit.name}</h5>
                        <div class="iit-marks">${iit.marks}</div>
                        <div class="iit-type">${iit.desc}</div>
                        <div style="margin-top: 10px; font-size: 0.9rem; ${isPossible ? 'color: var(--success); font-weight: 600;' : 'color: #666;'}">
                            ${isPossible ? '✅ Possible' : '❌ Challenging'}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            
            const cutoffRange = gateCutoffs2026[paper]?.[category] || "25-30";
            html += `<p style="margin-top: 15px; color: #0e6251; font-size: 0.95rem; text-align: center;">
                <i class="fas fa-info-circle"></i> <strong>Your Category Cutoff (2026):</strong> ${cutoffRange} marks
            </p>`;
            
            return html;
        }

        // Create PSU Chances Grid
        function createPSUChancesGrid(paper, userMarks) {
            const psuData = psuChancesData[paper] || psuChancesData["CS"];
            let userChance = "Unlikely";
            let userCompanies = "Private Sector";
            
            psuData.forEach(item => {
                const marksRange = item.marks;
                if (marksRange.includes('+')) {
                    const minMark = parseFloat(marksRange.replace('+', ''));
                    if (userMarks >= minMark) {
                        userChance = item.chance;
                        userCompanies = item.companies;
                    }
                } else if (marksRange.includes('<')) {
                    const maxMark = parseFloat(marksRange.replace('<', ''));
                    if (userMarks < maxMark) {
                        userChance = item.chance;
                        userCompanies = item.companies;
                    }
                } else {
                    const [minMark, maxMark] = marksRange.split('-').map(m => parseFloat(m));
                    if (userMarks >= minMark && userMarks <= maxMark) {
                        userChance = item.chance;
                        userCompanies = item.companies;
                    }
                }
            });
            
            const chanceColors = {
                "Very High": "#27ae60",
                "High": "#3498db",
                "Moderate": "#f39c12",
                "Low-Moderate": "#f39c12",
                "Low": "#e74c3c",
                "Very Low": "#e74c3c",
                "Unlikely": "#95a5a6"
            };
            
            let html = '<div class="psu-grid">';
            
            psuData.forEach(item => {
                const isUserChance = item.chance === userChance;
                const color = chanceColors[item.chance] || "#95a5a6";
                
                html += `
                    <div class="psu-card" style="${isUserChance ? 'border-top-color: ' + color + '; transform: scale(1.02); box-shadow: 0 5px 15px rgba(0,0,0,0.1);' : 'border-top-color: ' + color + ';'}">
                        <h5>${item.chance}</h5>
                        <div class="psu-chance" style="color: ${color};">${item.marks}</div>
                        <div class="psu-companies">${item.companies}</div>
                        ${isUserChance ? '<div style="margin-top: 5px; color: ' + color + '; font-weight: 600; font-size: 0.8rem;">✓ Your Range</div>' : ''}
                    </div>
                `;
            });
            
            html += '</div>';
            
            html += `
                <div style="margin-top: 20px; padding: 15px; background: white; border-radius: 10px; border-left: 5px solid ${chanceColors[userChance] || '#95a5a6'}; text-align: left;">
                    <h5 style="color: ${chanceColors[userChance] || '#95a5a6'}; margin-bottom: 10px;">Your PSU Recruitment Chance: <strong>${userChance}</strong></h5>
                    <p style="color: #555; margin-bottom: 5px;">🎯 Target Companies: ${userCompanies}</p>
                    <p style="color: #666; font-size: 0.9rem; margin-top: 10px;"><i class="fas fa-info-circle"></i> Based on GATE 2025 PSU recruitment trends</p>
                </div>
            `;
            
            return html;
        }

        // Create cutoff table
        function createCutoffTable(paper, userMarks, userCategory) {
            const cutoffData = gateCutoffs2026[paper] || gateCutoffs2026["CS"];
            
            const categoryMap = { 
                GEN: "General", 
                OBC: "OBC-NCL", 
                EWS: "EWS", 
                SC: "SC", 
                ST: "ST", 
                PWD: "PwD" 
            };
            
            let html = `
                <p><strong>Paper:</strong> ${paper} | <strong>Your Category:</strong> ${categoryMap[userCategory]}</p>
                <table class="cutoff-table">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Expected 2026 Cutoff (Range)</th>
                            <th>Mid Value</th>
                            <th>Your Marks</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            for (const [code, name] of Object.entries(categoryMap)) {
                const cutoffRange = cutoffData[code] || "25-30";
                const cutoffMid = gateCutoffsMid[paper]?.[code] || 27.5;
                const isUserCategory = code === userCategory;
                const passes = isUserCategory ? (userMarks >= cutoffMid) : null;
                
                html += `
                    <tr ${isUserCategory ? 'class="your-cutoff"' : ''}>
                        <td><strong>${name}</strong>${isUserCategory ? ' (You)' : ''}</td>
                        <td class="cutoff-value">${cutoffRange}</td>
                        <td class="cutoff-value">${cutoffMid.toFixed(1)}</td>
                        <td class="cutoff-value">${isUserCategory ? userMarks.toFixed(1) : '-'}</td>
                        <td>
                `;
                
                if (isUserCategory) {
                    if (passes) {
                        html += `<span style="background: var(--success); color: white; padding: 3px 8px; border-radius: 12px;"><i class="fas fa-check"></i> QUALIFIED</span>`;
                    } else {
                        html += `<span style="background: var(--danger); color: white; padding: 3px 8px; border-radius: 12px;"><i class="fas fa-times"></i> NOT QUALIFIED</span>`;
                    }
                } else {
                    html += `-`;
                }
                
                html += `</td></tr>`;
            }
            
            html += `</tbody></table>`;
            html += `<p style="margin-top: 10px; font-size: 0.9rem; color: #666;"><i class="fas fa-info-circle"></i> Based on GATE 2022-2025 trends. Actual cutoffs may vary.</p>`;
            
            return html;
        }

        // Get qualification status
        function getQualificationStatus(qualified, userMarks, requiredCutoff, paper, category) {
            const categoryNames = { GEN: "General", OBC: "OBC-NCL", EWS: "EWS", SC: "SC", ST: "ST", PWD: "PwD" };
            const cutoffRange = gateCutoffs2026[paper]?.[category] || "25-30";
            
            const statusDiv = document.getElementById('qualificationStatus');
            
            if (qualified) {
                statusDiv.className = 'qualification-status qualified';
                statusDiv.innerHTML = `
                    <div class="status-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="status-title" style="color: var(--success);">QUALIFIED! 🎉</div>
                    <div class="status-details">
                        <p>Congratulations! You have cleared the GATE 2026 expected cutoff for ${paper} (${categoryNames[category]}).</p>
                        <p><strong>Your Marks:</strong> ${userMarks.toFixed(1)} | <strong>Expected Cutoff Range:</strong> ${cutoffRange}</p>
                        <p>You are above the expected cutoff.</p>
                    </div>
                `;
            } else {
                statusDiv.className = 'qualification-status not-qualified';
                statusDiv.innerHTML = `
                    <div class="status-icon"><i class="fas fa-times-circle"></i></div>
                    <div class="status-title" style="color: var(--danger);">NOT QUALIFIED 😔</div>
                    <div class="status-details">
                        <p>You need to improve your score to clear the GATE 2026 expected cutoff for ${paper} (${categoryNames[category]}).</p>
                        <p><strong>Your Marks:</strong> ${userMarks.toFixed(1)} | <strong>Expected Cutoff Range:</strong> ${cutoffRange}</p>
                        <p>You need approximately <strong>${(requiredCutoff - userMarks + 1).toFixed(1)} more marks</strong> to be safe.</p>
                    </div>
                `;
            }
        }

        // Get analysis text
        function getAnalysisText(rank, marks, score, qualified, paper, category) {
            const categoryName = { GEN: "General", OBC: "OBC-NCL", EWS: "EWS", SC: "SC", ST: "ST", PWD: "PwD" }[category];
            const percentile = calculatePercentile(rank, paper);
            const totalCandidates = students2026[paper] || students2026["CS"];
            
            let analysis = '';
            
            if (category === 'SC' || category === 'ST') {
                analysis = `<span class="good">SC/ST Category:</span> Your marks: ${marks.toFixed(1)} | Category cutoff range: ${gateCutoffs2026[paper]?.[category] || "19-21"}<br><br>`;
            } else if (category === 'OBC' || category === 'EWS') {
                analysis = `<span class="good">OBC/EWS Category:</span> Your marks: ${marks.toFixed(1)} | Category cutoff range: ${gateCutoffs2026[paper]?.[category] || "26-28"}<br><br>`;
            }
            
            if (qualified) {
                if (rank <= 100) {
                    analysis += `<span class="excellent">Outstanding! Rank ${rank.toLocaleString()} (top 0.1%) - Excellent chances for top IITs with your dream branch.</span>`;
                } else if (rank <= 500) {
                    analysis += `<span class="excellent">Excellent! Rank ${rank.toLocaleString()} (top 0.5%) - Very strong chances for top IITs.</span>`;
                } else if (rank <= 1000) {
                    analysis += `<span class="excellent">Great! Rank ${rank.toLocaleString()} (top 1%) - Good chances for top IITs.</span>`;
                } else if (rank <= 5000) {
                    analysis += `<span class="good">Good! Rank ${rank.toLocaleString()} (top 5%) - Good chances for IITs/NITs.</span>`;
                } else if (rank <= 10000) {
                    analysis += `<span class="good">Decent! Rank ${rank.toLocaleString()} (top 10%) - Consider NITs/IIITs/GFTIs.</span>`;
                } else if (rank <= 20000) {
                    analysis += `<span class="average">Qualified! Rank ${rank.toLocaleString()} (top 20%) - Look for NITs/State Universities.</span>`;
                } else if (rank <= 50000) {
                    analysis += `<span class="average">Qualified! Rank ${rank.toLocaleString()} (top 40%) - Consider State Colleges/Universities.</span>`;
                } else {
                    analysis += `<span class="average">Qualified! Consider applying to various universities and colleges.</span>`;
                }
            } else {
                analysis += `<span class="improve">Need to improve. Current marks: ${marks.toFixed(1)} (Required: ${gateCutoffs2026[paper]?.[category] || "25-30"})</span>`;
            }
            
            analysis += `<br><br><strong>Your Statistics:</strong><br>`;
            analysis += `📊 Marks: ${marks.toFixed(2)}/100<br>`;
            analysis += `🏆 Rank: ${rank.toLocaleString()} out of ${totalCandidates.toLocaleString()}<br>`;
            analysis += `📈 Percentile: ${percentile}%<br>`;
            analysis += `⭐ GATE Score: ${score}<br>`;
            
            return analysis;
        }

        // Update chart
        function updateChart(userMarks, userRank, paper) {
            const ctx = document.getElementById('rankChart').getContext('2d');
            const data = branchRankData[paper] || branchRankData["CS"];
            
            if (rankChart) {
                rankChart.destroy();
            }
            
            rankChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: `Rank vs Marks Curve (${paper})`,
                        data: data.map(d => ({x: d.rank, y: d.marks})),
                        backgroundColor: 'rgba(52, 152, 219, 0.6)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        pointHoverBackgroundColor: 'rgba(52, 152, 219, 0.9)',
                        pointHoverBorderColor: 'white',
                        pointHoverBorderWidth: 2,
                        showLine: true,
                        tension: 0.4
                    }, {
                        label: 'Your Position',
                        data: [{x: userRank, y: userMarks}],
                        backgroundColor: 'rgba(231, 76, 60, 1)',
                        borderColor: 'white',
                        borderWidth: 3,
                        pointRadius: 12,
                        pointHoverRadius: 15,
                        pointStyle: 'star',
                        pointHoverBackgroundColor: 'rgba(231, 76, 60, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `Your Position: Rank ${userRank.toLocaleString()} (${userMarks.toFixed(2)} marks)`,
                            font: {size: 14, weight: 'bold'}
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.dataset.label === 'Your Position') {
                                        return `🎯 You: Rank ${context.raw.x.toLocaleString()}, Marks: ${context.raw.y.toFixed(2)}`;
                                    }
                                    return `📊 Rank: ${context.raw.x.toLocaleString()}, Marks: ${context.raw.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Rank (Lower is Better) →'
                            },
                            reverse: true,
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Marks (out of 100) ↑'
                            },
                            min: 0,
                            max: 100
                        }
                    }
                }
            });
        }

        // Graph view control
        function setGraphView(view) {
            currentGraphView = view;
            document.querySelectorAll('.graph-control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (currentPredictionData) {
                updateChart(currentPredictionData.marks, currentPredictionData.rank, currentPredictionData.paper);
            }
        }

        // Export graph
        function exportGraph() {
            const canvas = document.getElementById('rankChart');
            const link = document.createElement('a');
            link.download = `GATE-Rank-Curve-${Date.now()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // Save result
        function saveResult() {
            if (!currentPredictionData) {
                alert("Please generate a prediction first!");
                return;
            }
            
            const predictions = JSON.parse(localStorage.getItem('gatePredictions') || '[]');
            currentPredictionData.timestamp = new Date().toISOString();
            currentPredictionData.id = Date.now();
            predictions.push(currentPredictionData);
            
            localStorage.setItem('gatePredictions', JSON.stringify(predictions));
            alert("Result saved successfully!");
        }

        // Share on WhatsApp
        function shareWhatsApp() {
            if (!currentPredictionData) {
                alert("Please generate a prediction first!");
                return;
            }
            
            const { paper, category, marks, rank, score, percentile, qualified } = currentPredictionData;
            
            const message = `📊 *My GATE 2026 Prediction Results*%0A%0A` +
                `📝 Paper: ${paper} (${category})%0A` +
                `📊 Marks: ${marks.toFixed(2)}/100%0A` +
                `🏆 Expected Rank: ${rank.toLocaleString()}%0A` +
                `⭐ GATE Score: ${score}%0A` +
                `📈 Percentile: ${percentile}%%0A` +
                `✅ Qualification: ${qualified ? "PASSED ✓" : "NOT QUALIFIED ✗"}%0A%0A` +
                `🔗 Check your prediction at: ${window.location.href}%0A%0A` +
                `#GATE2026 #GATEPrediction #${paper}`;
            
            const whatsappUrl = `https://wa.me/?text=${message}`;
            window.open(whatsappUrl, '_blank');
        }

        // Download as Image
        function downloadResult() {
            const resultsSection = document.getElementById('resultsSection');
            
            html2canvas(resultsSection, {
                scale: 2,
                backgroundColor: '#ffffff',
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `GATE-2026-Prediction-${Date.now()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(error => {
                console.error('Error capturing image:', error);
                alert('Could not capture image. Please try again.');
            });
        }

        // Check again
        function checkAgain() {
            document.getElementById('resultsSection').classList.remove('visible');
            document.getElementById('loading').style.display = 'none';
            
            const inputSection = document.querySelector('.input-section');
            if (inputSection) {
                inputSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Main prediction function
        function predictRank() {
            const type1Correct = parseInt(document.getElementById('type1Correct').value) || 0;
            const type1Wrong = parseInt(document.getElementById('type1Wrong').value) || 0;
            const type2Correct = parseInt(document.getElementById('type2Correct').value) || 0;
            const type2Wrong = parseInt(document.getElementById('type2Wrong').value) || 0;
            
            const type1Total = type1Correct + type1Wrong;
            const type2Total = type2Correct + type2Wrong;
            
            if (type1Total > 30) {
                alert("Error: Total 1-mark questions cannot exceed 30.");
                return;
            }
            
            if (type2Total > 35) {
                alert("Error: Total 2-mark questions cannot exceed 35.");
                return;
            }
            
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultsSection').classList.remove('visible');
            
            setTimeout(() => {
                const paper = document.getElementById('paper').value;
                const category = currentCategory;
                
                const type1Marks = type1Correct - (type1Wrong * 0.33);
                const type2Marks = (type2Correct * 2) - (type2Wrong * 0.67);
                const userMarks = type1Marks + type2Marks;
                
                const predictedRank = calculateRankFromMarks(userMarks, paper);
                const predictedScore = calculateScoreFromMarks(userMarks, paper);
                const percentile = calculatePercentile(predictedRank, paper);
                const rankLower = Math.max(1, Math.round(predictedRank * 0.85));
                const rankUpper = Math.min(students2026[paper], Math.round(predictedRank * 1.15));
                
                const requiredCutoff = getCutoff(paper, category);
                const qualified = userMarks >= requiredCutoff;
                
                currentPredictionData = {
                    paper,
                    category,
                    marks: userMarks,
                    rank: predictedRank,
                    score: predictedScore,
                    percentile,
                    qualified,
                    type1Correct,
                    type1Wrong,
                    type2Correct,
                    type2Wrong
                };
                
                document.getElementById('type1Marks').textContent = type1Marks.toFixed(2);
                document.getElementById('type2Marks').textContent = type2Marks.toFixed(2);
                document.getElementById('totalMarks').textContent = userMarks.toFixed(2);
                document.getElementById('type1Details').textContent = `${type1Correct}✓ ${type1Wrong}✗`;
                document.getElementById('type2Details').textContent = `${type2Correct}✓ ${type2Wrong}✗`;
                
                document.getElementById('predictedRank').textContent = predictedRank.toLocaleString();
                document.getElementById('predictedScore').textContent = predictedScore;
                document.getElementById('percentile').textContent = percentile + '%';
                document.getElementById('rankRange').textContent = `${rankLower.toLocaleString()} - ${rankUpper.toLocaleString()}`;
                
                getQualificationStatus(qualified, userMarks, requiredCutoff, paper, category);
                
                document.getElementById('cutoffTableContainer').innerHTML = createCutoffTable(paper, userMarks, category);
                
                document.getElementById('iitGridContainer').innerHTML = createIITAdmissionGrid(paper, category, userMarks);
                
                document.getElementById('psuGridContainer').innerHTML = createPSUChancesGrid(paper, userMarks);
                
                document.getElementById('analysisText').innerHTML = getAnalysisText(predictedRank, userMarks, predictedScore, qualified, paper, category);
                
                updateChart(userMarks, predictedRank, paper);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('resultsSection').classList.add('visible');
                
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            }, 800);
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('type1Correct').setAttribute('max', 30);
            document.getElementById('type1Wrong').setAttribute('max', 30);
            document.getElementById('type2Correct').setAttribute('max', 35);
            document.getElementById('type2Wrong').setAttribute('max', 35);
            
            document.getElementById('type1Correct').value = '';
            document.getElementById('type1Wrong').value = '';
            document.getElementById('type2Correct').value = '';
            document.getElementById('type2Wrong').value = '';
            
            updateMarks();
            document.getElementById('resultsSection').classList.remove('visible');
        });
    </script>
</body>
</html>
