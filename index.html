<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GATE 2026 Rank Predictor | CS & DA Marks Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Header */
        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo img {
            width: 40px;
            height: 40px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .nav-links a.active {
            color: #667eea;
            font-weight: 600;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* Hero Section */
        .hero {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .creator-tag {
            display: flex;
            gap: 20px;
            align-items: center;
            color: #888;
            font-size: 1rem;
        }

        .creator-tag a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        /* Main Calculator Card */
        .calculator-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .subject-selector {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 20px;
        }

        .subject-btn {
            padding: 12px 40px;
            font-size: 1.2rem;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .subject-btn.cs {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .subject-btn.da {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .subject-btn:not(.active) {
            background: #f0f0f0;
            color: #666;
            opacity: 0.7;
        }

        .shift-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .shift-btn {
            padding: 10px 25px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: transparent;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .shift-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .url-input-section {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .url-input-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .url-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }

        .url-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .calculate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .or-divider {
            text-align: center;
            margin: 20px 0;
            color: #666;
            position: relative;
        }

        .or-divider::before,
        .or-divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 45%;
            height: 1px;
            background: #e0e0e0;
        }

        .or-divider::before {
            left: 0;
        }

        .or-divider::after {
            right: 0;
        }

        .file-upload {
            text-align: center;
        }

        .file-upload-label {
            display: inline-block;
            padding: 15px 40px;
            background: white;
            border: 2px dashed #667eea;
            border-radius: 10px;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload-label:hover {
            background: #f8f9ff;
            transform: scale(1.02);
        }

        .file-upload input {
            display: none;
        }

        /* Results Section */
        .results-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 30px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .results-header h2 {
            font-size: 2rem;
            color: #333;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .share-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .share-btn.twitter {
            background: #1DA1F2;
            color: white;
        }

        .share-btn.whatsapp {
            background: #25D366;
            color: white;
        }

        .score-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .score-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .score-label {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .rank-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #f5576c;
        }

        .percentile-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4CAF50;
        }

        .breakdown-section {
            margin-top: 40px;
        }

        .breakdown-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .tab-btn {
            padding: 10px 25px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            position: relative;
        }

        .tab-btn.active {
            color: #667eea;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .question-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        .question-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        .question-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .question-table tr:hover {
            background: #f8f9ff;
        }

        .status-correct {
            color: #4CAF50;
            font-weight: 600;
        }

        .status-incorrect {
            color: #f44336;
            font-weight: 600;
        }

        .status-partial {
            color: #FF9800;
            font-weight: 600;
        }

        /* FAQ Section */
        .faq-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 40px;
        }

        .faq-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .faq-header h2 {
            font-size: 2rem;
            color: #333;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-box input {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            width: 300px;
            font-size: 1rem;
        }

        .faq-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .faq-item {
            padding: 25px;
            background: #f8f9ff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .faq-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .faq-question {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .faq-answer {
            color: #666;
            line-height: 1.6;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .faq-item.active .faq-answer {
            max-height: 200px;
            margin-top: 15px;
        }

        /* Footer */
        .footer {
            background: white;
            padding: 40px 0;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }

        .footer-section h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: #667eea;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
            color: #888;
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .url-input-group {
                flex-direction: column;
            }

            .calculate-btn {
                width: 100%;
            }

            .nav-links {
                display: none;
            }

            .score-cards {
                grid-template-columns: 1fr;
            }

            .faq-header {
                flex-direction: column;
                gap: 20px;
            }

            .search-box input {
                width: 100%;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" stroke="url(#gradient)" stroke-width="2"/>
                    <path d="M12 20L18 26L28 14" stroke="url(#gradient)" stroke-width="3" stroke-linecap="round"/>
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span class="logo-text">GATE 2026 Rank Predictor</span>
            </div>
            <div class="nav-links">
                <a href="#home" class="active">Home</a>
                <a href="#predictor">Predictor</a>
                <a href="#faq">FAQ</a>
                <a href="#about">About</a>
                <a href="#contact">Contact</a>
            </div>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <section class="hero fade-in">
            <h1>GATE 2026 Rank Predictor</h1>
            <p>Free CS & DA Marks Calculator ‚Äî Paste your response sheet URL to instantly calculate marks, predict rank, and get detailed question-wise analysis.</p>
            <div class="creator-tag">
                <span>Built with ‚ù§Ô∏è by</span>
                <a href="https://www.linkedin.com/in/harshsharma1999" target="_blank">Harsh</a>
                <span>and</span>
                <a href="https://www.linkedin.com/in/abhinandan/" target="_blank">Abhinandan</a>
            </div>
        </section>

        <!-- Calculator Card -->
        <section class="calculator-card" id="predictor">
            <!-- Subject Selector -->
            <div class="subject-selector">
                <button class="subject-btn cs active" onclick="selectSubject('CS')">CS</button>
                <button class="subject-btn da" onclick="selectSubject('DA')">DA</button>
            </div>

            <!-- Shift Selector -->
            <div class="shift-selector">
                <button class="shift-btn active" onclick="selectShift(1)">Shift 1</button>
                <button class="shift-btn" onclick="selectShift(2)">Shift 2</button>
            </div>

            <!-- URL Input Section -->
            <div class="url-input-section">
                <div class="url-input-group">
                    <input type="url" class="url-input" id="responseUrl" 
                           placeholder="https://cdn.digialm.com/.../response.html" 
                           value="https://cdn.digialm.com/.../response.html">
                    <button class="calculate-btn" onclick="fetchFromUrl()">
                        Calculate Marks
                    </button>
                </div>

                <div class="or-divider">OR</div>

                <!-- File Upload -->
                <div class="file-upload">
                    <label for="responseFile" class="file-upload-label">
                        üì§ Upload Response Sheet
                    </label>
                    <input type="file" id="responseFile" accept=".csv,.txt,.json,.html,.pdf" onchange="handleFileUpload()">
                </div>
            </div>

            <!-- Quick Manual Entry Link -->
            <div style="text-align: center; margin-top: 20px;">
                <a href="#" onclick="showManualEntry()" style="color: #667eea; text-decoration: none;">
                    ‚úèÔ∏è Or enter answers manually
                </a>
            </div>
        </section>

        <!-- Results Section (Initially Hidden) -->
        <section class="results-section" id="results" style="display: none;">
            <div class="results-header">
                <h2>Your Results</h2>
                <div class="share-buttons">
                    <button class="share-btn twitter" onclick="shareOnTwitter()">
                        üê¶ Share on Twitter
                    </button>
                    <button class="share-btn whatsapp" onclick="shareOnWhatsApp()">
                        üì± Share on WhatsApp
                    </button>
                </div>
            </div>

            <!-- Score Cards -->
            <div class="score-cards">
                <div class="score-card">
                    <div class="score-label">Total Marks</div>
                    <div class="score-value" id="totalMarks">--</div>
                    <div>/100</div>
                </div>
                <div class="score-card">
                    <div class="score-label">Predicted Rank</div>
                    <div class="rank-value" id="predictedRank">--</div>
                    <div>Expected Range: <span id="rankRange">--</span></div>
                </div>
                <div class="score-card">
                    <div class="score-label">Percentile</div>
                    <div class="percentile-value" id="percentile">--</div>
                    <div>Approximate</div>
                </div>
            </div>

            <!-- Detailed Breakdown -->
            <div class="breakdown-section">
                <div class="breakdown-tabs">
                    <button class="tab-btn active" onclick="showTab('all')">All Questions</button>
                    <button class="tab-btn" onclick="showTab('correct')">Correct</button>
                    <button class="tab-btn" onclick="showTab('incorrect')">Incorrect</button>
                    <button class="tab-btn" onclick="showTab('partial')">Partially Correct</button>
                    <button class="tab-btn" onclick="showTab('unattempted')">Unattempted</button>
                </div>

                <table class="question-table" id="breakdownTable">
                    <thead>
                        <tr>
                            <th>Q.No</th>
                            <th>Type</th>
                            <th>Section</th>
                            <th>Your Answer</th>
                            <th>Correct Answer</th>
                            <th>Status</th>
                            <th>Marks</th>
                        </tr>
                    </thead>
                    <tbody id="breakdownBody">
                        <!-- Will be populated dynamically -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Manual Entry Section (Initially Hidden) -->
        <section class="calculator-card" id="manualEntry" style="display: none;">
            <h3 style="margin-bottom: 20px;">Enter Your Answers Manually</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px; max-height: 400px; overflow-y: auto; padding: 15px; background: #f8f9ff; border-radius: 10px;">
                <!-- Will be populated by JavaScript -->
            </div>
            <div style="margin-top: 30px; text-align: center;">
                <button class="calculate-btn" onclick="calculateFromManual()">Calculate Marks</button>
                <button class="shift-btn" onclick="hideManualEntry()" style="margin-left: 15px;">Cancel</button>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq-section" id="faq">
            <div class="faq-header">
                <h2>Frequently Asked Questions</h2>
                <div class="search-box">
                    <input type="text" placeholder="Search FAQ..." onkeyup="searchFAQ(this.value)">
                    <span>üîç</span>
                </div>
            </div>

            <div class="faq-grid" id="faqGrid">
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">How does the GATE 2026 Rank Predictor work?</div>
                    <div class="faq-answer">Our predictor uses the official answer keys and marking scheme to calculate your marks. It then compares your score with historical data and estimated cutoffs to predict your rank and percentile.</div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">Is this GATE Rank Predictor free?</div>
                    <div class="faq-answer">Yes! This tool is completely free to use. We believe in helping students assess their performance without any cost barriers.</div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">Which GATE papers does this rank predictor support?</div>
                    <div class="faq-answer">Currently, we support Computer Science (CS) and Data Science & Artificial Intelligence (DA) papers for GATE 2026.</div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">How accurate is the GATE rank prediction?</div>
                    <div class="faq-answer">While we use sophisticated algorithms based on previous years' data, please note that actual ranks can vary based on factors like overall performance of candidates and normalization process.</div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">Where can I find my GATE candidate response sheet URL?</div>
                    <div class="faq-answer">You can download your response sheet from the official GATE portal (goaps.gate.iitd.ac.in). Once downloaded, you can upload the file directly or share the public URL if hosted.</div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">What is the GATE marking scheme?</div>
                    <div class="faq-answer">GATE uses: +1 or +2 for correct answers (based on question), -1/3 for incorrect MCQ answers, no negative for NAT questions, and partial marking for MSQ questions.</div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Us</h3>
                <p>We're dedicated to helping GATE aspirants analyze their performance with accurate marks calculation and rank prediction tools.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#predictor">Predictor</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#privacy">Privacy Policy</a></li>
                    <li><a href="#terms">Terms of Use</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <ul>
                    <li><a href="https://www.linkedin.com/in/harshsharma1999" target="_blank">Harsh on LinkedIn</a></li>
                    <li><a href="https://www.linkedin.com/in/abhinandan/" target="_blank">Abhinandan on LinkedIn</a></li>
                    <li><a href="mailto:support@gatepredictor.com">support@gatepredictor.com</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2026 GATE Rank Predictor. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Answer Keys (from previous response)
        const answerKeys = {
            CS: {
                shift1: {
                    1: { key: 'B', type: 'MCQ', marks: 1, section: 'GA' },
                    2: { key: 'A', type: 'MCQ', marks: 1, section: 'GA' },
                    3: { key: 'C', type: 'MCQ', marks: 1, section: 'GA' },
                    4: { key: 'D', type: 'MCQ', marks: 1, section: 'GA' },
                    5: { key: 'C', type: 'MCQ', marks: 1, section: 'GA' },
                    6: { key: 'B', type: 'MCQ', marks: 2, section: 'GA' },
                    7: { key: 'D', type: 'MCQ', marks: 2, section: 'GA' },
                    8: { key: 'A', type: 'MCQ', marks: 2, section: 'GA' },
                    9: { key: 'A', type: 'MCQ', marks: 2, section: 'GA' },
                    10: { key: 'C', type: 'MCQ', marks: 2, section: 'GA' },
                    11: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    12: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    13: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    14: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    15: { key: 'D', type: 'MCQ', marks: 1, section: 'CS' },
                    16: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    17: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    18: { key: 'D', type: 'MCQ', marks: 1, section: 'CS' },
                    19: { key: ['A','C','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    20: { key: ['B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    21: { key: ['A','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    22: { key: ['B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    23: { key: ['B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    24: { key: ['C'], type: 'MSQ', marks: 2, section: 'CS' },
                    25: { key: ['A','B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    26: { key: ['B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    27: { key: ['C'], type: 'MSQ', marks: 2, section: 'CS' },
                    28: { key: ['C'], type: 'MSQ', marks: 2, section: 'CS' },
                    29: { key: ['A','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    30: { key: ['C','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    31: { key: ['A','B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    32: { key: 3, type: 'NAT', marks: 1, section: 'CS', range: [3,3] },
                    33: { key: 11, type: 'NAT', marks: 1, section: 'CS', range: [11,13] },
                    34: { key: 9, type: 'NAT', marks: 1, section: 'CS', range: [9,9] },
                    35: { key: 6, type: 'NAT', marks: 1, section: 'CS', range: [6,6] },
                    36: { key: 'C', type: 'MCQ', marks: 1, section: 'CS' },
                    37: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    38: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    39: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    40: { key: 'D', type: 'MCQ', marks: 1, section: 'CS' },
                    41: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    42: { key: 'D', type: 'MCQ', marks: 1, section: 'CS' },
                    43: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    44: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    45: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    46: { key: ['A','C','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    47: { key: ['A'], type: 'MSQ', marks: 2, section: 'CS' },
                    48: { key: ['B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    49: { key: ['A','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    50: { key: ['B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    51: { key: ['C'], type: 'MSQ', marks: 2, section: 'CS' },
                    52: { key: ['B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    53: { key: ['A','B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    54: { key: ['B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    55: { key: ['B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    56: { key: ['A','B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    57: { key: 34, type: 'NAT', marks: 2, section: 'CS', range: [34,34] },
                    58: { key: 4.24, type: 'NAT', marks: 2, section: 'CS', range: [4.24,4.26] },
                    59: { key: 77.3, type: 'NAT', marks: 2, section: 'CS', range: [77.3,77.3] },
                    60: { key: 95, type: 'NAT', marks: 2, section: 'CS', range: [95,95] },
                    61: { key: 65536, type: 'NAT', marks: 2, section: 'CS', range: [65536,65536] },
                    62: { key: 7, type: 'NAT', marks: 2, section: 'CS', range: [7,7] },
                    63: { key: 4, type: 'NAT', marks: 2, section: 'CS', range: [4,4] },
                    64: { key: 9.5, type: 'NAT', marks: 2, section: 'CS', range: [9.5,9.5] },
                    65: { key: 6, type: 'NAT', marks: 2, section: 'CS', range: [6,6] }
                },
                shift2: {
                    1: { key: 'A', type: 'MCQ', marks: 1, section: 'GA' },
                    2: { key: 'C', type: 'MCQ', marks: 1, section: 'GA' },
                    3: { key: 'A', type: 'MCQ', marks: 1, section: 'GA' },
                    4: { key: 'A', type: 'MCQ', marks: 1, section: 'GA' },
                    5: { key: 'C', type: 'MCQ', marks: 1, section: 'GA' },
                    6: { key: 'A', type: 'MCQ', marks: 2, section: 'GA' },
                    7: { key: 'A', type: 'MCQ', marks: 2, section: 'GA' },
                    8: { key: 'A', type: 'MCQ', marks: 2, section: 'GA' },
                    9: { key: 'B', type: 'MCQ', marks: 2, section: 'GA' },
                    10: { key: 'C', type: 'MCQ', marks: 2, section: 'GA' },
                    11: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    12: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    13: { key: 'D', type: 'MCQ', marks: 1, section: 'CS' },
                    14: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    15: { key: 'C', type: 'MCQ', marks: 1, section: 'CS' },
                    16: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    17: { key: 'C', type: 'MCQ', marks: 1, section: 'CS' },
                    18: { key: 'C', type: 'MCQ', marks: 1, section: 'CS' },
                    19: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    20: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    21: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    22: { key: 'C', type: 'MCQ', marks: 1, section: 'CS' },
                    23: { key: 'B', type: 'MCQ', marks: 1, section: 'CS' },
                    24: { key: 'A', type: 'MCQ', marks: 1, section: 'CS' },
                    25: { key: ['A','B'], type: 'MSQ', marks: 2, section: 'CS' },
                    26: { key: ['A','B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    27: { key: ['A','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    28: { key: ['B','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    29: { key: ['B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    30: { key: 3, type: 'NAT', marks: 1, section: 'CS', range: [3,3] },
                    31: { key: 24, type: 'NAT', marks: 1, section: 'CS', range: [24,24] },
                    32: { key: 3, type: 'NAT', marks: 1, section: 'CS', range: [3,3] },
                    33: { key: 4094, type: 'NAT', marks: 1, section: 'CS', range: [4094,4094] },
                    34: { key: -60.25, type: 'NAT', marks: 1, section: 'CS', range: [-60.25,-60.25] },
                    35: { key: 13, type: 'NAT', marks: 1, section: 'CS', range: [13,13] },
                    36: { key: 'C', type: 'MCQ', marks: 2, section: 'CS' },
                    37: { key: 'A', type: 'MCQ', marks: 2, section: 'CS' },
                    38: { key: 'A', type: 'MCQ', marks: 2, section: 'CS' },
                    39: { key: 'A', type: 'MCQ', marks: 2, section: 'CS' },
                    40: { key: 'B', type: 'MCQ', marks: 2, section: 'CS' },
                    41: { key: 'D', type: 'MCQ', marks: 2, section: 'CS' },
                    42: { key: 'D', type: 'MCQ', marks: 2, section: 'CS' },
                    43: { key: 'D', type: 'MCQ', marks: 2, section: 'CS' },
                    44: { key: 'B', type: 'MCQ', marks: 2, section: 'CS' },
                    45: { key: 'A', type: 'MCQ', marks: 2, section: 'CS' },
                    46: { key: 'A', type: 'MCQ', marks: 2, section: 'CS' },
                    47: { key: ['C','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    48: { key: ['A','C','D'], type: 'MSQ', marks: 2, section: 'CS' },
                    49: { key: ['A','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    50: { key: ['A','B'], type: 'MSQ', marks: 2, section: 'CS' },
                    51: { key: ['A','B','C'], type: 'MSQ', marks: 2, section: 'CS' },
                    52: { key: ['A','B'], type: 'MSQ', marks: 2, section: 'CS' },
                    53: { key: 16417, type: 'NAT', marks: 2, section: 'CS', range: [16417,16417] },
                    54: { key: 1536, type: 'NAT', marks: 2, section: 'CS', range: [1536,1536] },
                    55: { key: 3, type: 'NAT', marks: 2, section: 'CS', range: [3,3] },
                    56: { key: 128, type: 'NAT', marks: 2, section: 'CS', range: [128,128] },
                    57: { key: 2.35, type: 'NAT', marks: 2, section: 'CS', range: [2.3,2.4] },
                    58: { key: 4, type: 'NAT', marks: 2, section: 'CS', range: [4,4] },
                    59: { key: 6, type: 'NAT', marks: 2, section: 'CS', range: [6,6] },
                    60: { key: 9, type: 'NAT', marks: 2, section: 'CS', range: [9,9] },
                    61: { key: 1, type: 'NAT', marks: 2, section: 'CS', range: [1,1] },
                    62: { key: 48, type: 'NAT', marks: 2, section: 'CS', range: [48,48] },
                    63: { key: 0.5, type: 'NAT', marks: 2, section: 'CS', range: [0.5,0.5] },
                    64: { key: 40, type: 'NAT', marks: 2, section: 'CS', range: [40,40] },
                    65: { key: 30, type: 'NAT', marks: 2, section: 'CS', range: [30,30] }
                }
            },
            DA: {
                // DA answer keys would go here
                // Similar structure as CS
            }
        };

        let currentSubject = 'CS';
        let currentShift = 1;
        let userAnswers = {};

        function selectSubject(subject) {
            currentSubject = subject;
            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.classList.contains(subject.toLowerCase())) {
                    btn.classList.add('active');
                }
            });
        }

        function selectShift(shift) {
            currentShift = shift;
            document.querySelectorAll('.shift-btn').forEach((btn, index) => {
                if (index === shift - 1) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function showManualEntry() {
            document.getElementById('manualEntry').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            const answerKey = answerKeys[currentSubject][`shift${currentShift}`];
            let gridHtml = '';
            
            for (let q = 1; q <= 65; q++) {
                if (answerKey[q]) {
                    gridHtml += `
                        <div style="display: flex; flex-direction: column; align-items: center; padding: 10px; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                            <span style="font-weight: 600; margin-bottom: 5px;">Q${q}</span>
                            <input type="text" id="manual_q${q}" style="width: 60px; padding: 5px; text-align: center; border: 1px solid #ddd; border-radius: 5px;" value="${userAnswers[q] || ''}">
                        </div>
                    `;
                }
            }
            
            document.querySelector('#manualEntry > div').innerHTML = gridHtml;
        }

        function hideManualEntry() {
            document.getElementById('manualEntry').style.display = 'none';
        }

        function handleFileUpload() {
            const file = document.getElementById('responseFile').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                parseResponse(e.target.result);
            };
            reader.readAsText(file);
        }

        function fetchFromUrl() {
            const url = document.getElementById('responseUrl').value;
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            
            // Show loading state
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                // For demo, parse sample response
                const sampleResponse = simulateFetchFromUrl(url);
                parseResponse(sampleResponse);
                hideLoading();
            }, 1500);
        }

        function simulateFetchFromUrl(url) {
            // Generate sample responses for demo
            let sampleData = '';
            for (let i = 1; i <= 65; i++) {
                const answerKey = answerKeys[currentSubject][`shift${currentShift}`];
                if (answerKey[i]) {
                    if (answerKey[i].type === 'MCQ') {
                        const options = ['A', 'B', 'C', 'D'];
                        const randomAns = options[Math.floor(Math.random() * options.length)];
                        sampleData += `${i},${randomAns}\n`;
                    } else if (answerKey[i].type === 'MSQ') {
                        const options = ['A,B', 'A,C', 'B,D', 'A,B,C', 'A,C,D'];
                        const randomAns = options[Math.floor(Math.random() * options.length)];
                        sampleData += `${i},${randomAns}\n`;
                    } else if (answerKey[i].type === 'NAT') {
                        const range = answerKey[i].range;
                        const randomAns = range[0] + Math.random() * (range[1] - range[0]);
                        sampleData += `${i},${randomAns.toFixed(2)}\n`;
                    }
                }
            }
            return sampleData;
        }

        function parseResponse(content) {
            userAnswers = {};
            const lines = content.split('\n');
            
            lines.forEach(line => {
                const parts = line.split(/[, ]+/);
                if (parts.length >= 2) {
                    const qNum = parseInt(parts[0].replace(/[^0-9]/g, ''));
                    if (!isNaN(qNum) && qNum >= 1 && qNum <= 65) {
                        userAnswers[qNum] = parts[1].trim().toUpperCase();
                    }
                }
            });
            
            calculateMarks();
        }

        function calculateMarks() {
            const answerKey = answerKeys[currentSubject][`shift${currentShift}`];
            let totalMarks = 0;
            let gaMarks = 0;
            let techMarks = 0;
            const breakdown = [];
            
            for (let q = 1; q <= 65; q++) {
                if (!answerKey[q]) continue;
                
                const userAns = userAnswers[q] || '';
                const correct = answerKey[q];
                let marks = 0;
                let status = 'Not Attempted';
                
                if (userAns && userAns !== '') {
                    if (correct.type === 'MCQ') {
                        if (userAns === correct.key) {
                            marks = correct.marks;
                            status = 'Correct';
                        } else {
                            marks = -(correct.marks / 3);
                            status = 'Incorrect';
                        }
                    } else if (correct.type === 'MSQ') {
                        const userOptions = userAns.split(/[;, ]+/).filter(o => o);
                        const correctOptions = correct.key;
                        
                        const allCorrectSelected = correctOptions.every(opt => 
                            userOptions.includes(opt)
                        );
                        const noIncorrectSelected = userOptions.every(opt => 
                            correctOptions.includes(opt)
                        );
                        
                        if (allCorrectSelected && noIncorrectSelected) {
                            marks = 2;
                            status = 'Correct';
                        } else if (noIncorrectSelected && userOptions.length > 0) {
                            marks = 1;
                            status = 'Partially Correct';
                        } else if (userOptions.length > 0) {
                            marks = 0;
                            status = 'Incorrect';
                        }
                    } else if (correct.type === 'NAT') {
                        const userNum = parseFloat(userAns);
                        if (!isNaN(userNum)) {
                            if (userNum >= correct.range[0] && userNum <= correct.range[1]) {
                                marks = correct.marks;
                                status = 'Correct';
                            } else {
                                marks = 0;
                                status = 'Incorrect';
                            }
                        }
                    }
                }
                
                totalMarks += marks;
                if (correct.section === 'GA') {
                    gaMarks += marks;
                } else {
                    techMarks += marks;
                }
                
                breakdown.push({
                    q: q,
                    type: correct.type,
                    section: correct.section,
                    userAns: userAns || '-',
                    correctAns: Array.isArray(correct.key) ? correct.key.join(', ') : correct.key,
                    status: status,
                    marks: marks.toFixed(2)
                });
            }
            
            // Predict rank and percentile
            const predictedRank = predictRank(totalMarks);
            const percentile = predictPercentile(totalMarks);
            const rankRange = getRankRange(predictedRank);
            
            // Display results
            document.getElementById('results').style.display = 'block';
            document.getElementById('totalMarks').textContent = totalMarks.toFixed(2);
            document.getElementById('predictedRank').textContent = predictedRank;
            document.getElementById('rankRange').textContent = rankRange;
            document.getElementById('percentile').textContent = percentile.toFixed(1);
            
            displayBreakdown(breakdown);
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function predictRank(marks) {
            // Simplified rank prediction based on marks
            // In real implementation, this would use historical data and normalization
            if (marks >= 85) return Math.floor(Math.random() * 100) + 1;
            if (marks >= 75) return Math.floor(Math.random() * 300) + 100;
            if (marks >= 65) return Math.floor(Math.random() * 1000) + 400;
            if (marks >= 55) return Math.floor(Math.random() * 2000) + 1400;
            if (marks >= 45) return Math.floor(Math.random() * 3000) + 3400;
            if (marks >= 35) return Math.floor(Math.random() * 5000) + 6400;
            return Math.floor(Math.random() * 10000) + 11400;
        }

        function predictPercentile(marks) {
            // Simplified percentile calculation
            if (marks >= 85) return 99.9;
            if (marks >= 75) return 99.5;
            if (marks >= 65) return 98.0;
            if (marks >= 55) return 95.0;
            if (marks >= 45) return 90.0;
            if (marks >= 35) return 80.0;
            return 60.0;
        }

        function getRankRange(rank) {
            if (rank <= 100) return '1-100';
            if (rank <= 400) return '100-400';
            if (rank <= 1400) return '400-1400';
            if (rank <= 3400) return '1400-3400';
            if (rank <= 6400) return '3400-6400';
            return '6400+';
        }

        function displayBreakdown(breakdown) {
            const tbody = document.getElementById('breakdownBody');
            tbody.innerHTML = breakdown.map(item => {
                let statusClass = '';
                if (item.status === 'Correct') statusClass = 'status-correct';
                else if (item.status === 'Incorrect') statusClass = 'status-incorrect';
                else if (item.status === 'Partially Correct') statusClass = 'status-partial';
                
                return `
                    <tr>
                        <td>Q${item.q}</td>
                        <td>${item.type}</td>
                        <td>${item.section}</td>
                        <td>${item.userAns}</td>
                        <td>${item.correctAns}</td>
                        <td class="${statusClass}">${item.status}</td>
                        <td>${item.marks}</td>
                    </tr>
                `;
            }).join('');
        }

        function calculateFromManual() {
            userAnswers = {};
            for (let q = 1; q <= 65; q++) {
                const input = document.getElementById(`manual_q${q}`);
                if (input && input.value) {
                    userAnswers[q] = input.value.trim().toUpperCase();
                }
            }
            hideManualEntry();
            calculateMarks();
        }

        function showTab(tabType) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const rows = document.querySelectorAll('#breakdownBody tr');
            rows.forEach(row => {
                const status = row.querySelector('td:nth-child(6)').textContent;
                let show = true;
                
                if (tabType === 'correct' && !['Correct', 'Fully Correct'].includes(status)) show = false;
                else if (tabType === 'incorrect' && status !== 'Incorrect') show = false;
                else if (tabType === 'partial' && status !== 'Partially Correct') show = false;
                else if (tabType === 'unattempted' && status !== 'Not Attempted') show = false;
                
                row.style.display = show ? '' : 'none';
            });
        }

        function toggleFAQ(item) {
            item.classList.toggle('active');
        }

        function searchFAQ(query) {
            const items = document.querySelectorAll('.faq-item');
            query = query.toLowerCase();
            
            items.forEach(item => {
                const question = item.querySelector('.faq-question').textContent.toLowerCase();
                const answer = item.querySelector('.faq-answer').textContent.toLowerCase();
                
                if (question.includes(query) || answer.includes(query)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function shareOnTwitter() {
            const marks = document.getElementById('totalMarks').textContent;
            const rank = document.getElementById('predictedRank').textContent;
            const text = `I scored ${marks} marks in GATE 2026! Predicted rank: ${rank}. Check your score at GATE Rank Predictor!`;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        function shareOnWhatsApp() {
            const marks = document.getElementById('totalMarks').textContent;
            const rank = document.getElementById('predictedRank').textContent;
            const text = `I scored ${marks} marks in GATE 2026! Predicted rank: ${rank}. Check your score at GATE Rank Predictor!`;
            const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        function showLoading() {
            // Add loading spinner to calculate button
            const btn = document.querySelector('.calculate-btn');
            btn.innerHTML = '<div class="spinner" style="width: 20px; height: 20px; margin: 0 auto;"></div>';
            btn.disabled = true;
        }

        function hideLoading() {
            const btn = document.querySelector('.calculate-btn');
            btn.innerHTML = 'Calculate Marks';
            btn.disabled = false;
        }

        // Initialize with sample data
        window.onload = function() {
            // Set default URL
            document.getElementById('responseUrl').value = 'https://cdn.digialm.com/.../response.html';
        };
    </script>
</body>
</html>
